<?xml version="1.0" encoding="UTF-8"?><databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">	<changeSet id="modifyUserDetail" author="zhangwenyun">		<modifyDataType columnName="graduated" newDataType="varchar(255)"			tableName="ec_user_detail" />	</changeSet>	<changeSet id="addColumnsQQ" author="zhangwenyun">		<addColumn tableName="ec_user_detail">			<column name="qq" type="varchar(255)"></column>		</addColumn>	</changeSet>	<changeSet id="addresource" author="hepei">		<sql>			INSERT INTO `ec_resource`			(`TYPE`,`VALUE`,			`MODEL_NAME`,			`PARENT_ID`,			`createTime`,			`createBy`,			`lastUpdateTime`,			`lastUpdateBy`)			VALUES (NULL,			'/manager/gameRecord',			'游戏领取记录',			0,			'2013-11-06 09:02:59',			'13512529243',			'2013-11-06 09:02:59',			'13512529243')		</sql>		<createTable tableName="ec_double_eleven">		    <column name="id" type="varchar(255)">				<constraints primaryKey="true" nullable="false" />			</column>			<column name="sumdeposit" type="double(20,2)">				<constraints nullable="true" />			</column>			<column name="nickname" type="varchar(255)">				<constraints nullable="true" />			</column>			<column name="createtime" type="datetime">				<constraints nullable="true" />			</column>			<column name="addtime" type="datetime">				<constraints primaryKey="true" nullable="false" />			</column>		</createTable>		<createView viewName="double_eleven_view">		<![CDATA[	select sum(`a`.`policy_deposit`) AS `sum_deposit`,`b`.`nickName` AS `nickName`,min(`a`.`createTime`) AS `createTime` from (`ec_user_game_relation` `a` left join `ec_user` `b` on((`a`.`userid` = `b`.`mobileNumber`))) where ((`a`.`createTime` >= '2013-11-11 00:00:00') and (`a`.`createTime` <= '2013-11-12 00:00:00')) group by `a`.`userid`]]>	</createView>		<createProcedure>			CREATE PROCEDURE `proc_double_eleven`()			BEGIN			declare			_sumdeposit DOUBLE;			declare _nickname varchar(255);			declare _createtime			datetime;			declare fetchSeqOk boolean;			declare cur1 CURSOR FOR select *			from double_eleven_view ;			declare continue handler for NOT FOUND set			fetchSeqOk = true;			truncate ec_double_eleven;			set fetchSeqOk = false;			open cur1;			fetchSeqLoop:Loop			FETCH cur1 INTO			_sumdeposit,_nickname,_createtime;			if fetchSeqOk then			leave			fetchSeqLoop;			else			insert into ec_double_eleven(sumdeposit,nickname,createtime,id,addtime) values			(_sumdeposit,_nickname,_createtime,UUID(),now());			end if;			end Loop;			close cur1;			end		</createProcedure>		<createProcedure>			CREATE EVENT `double_eleven_event` ON SCHEDULE EVERY			5 MINUTE STARTS '2013-11-11 00:00:00' ENDS '2013-11-12 00:00:00' ON COMPLETION NOT PRESERVE			ENABLE DO call proc_double_eleven();		</createProcedure>	</changeSet></databaseChangeLog>