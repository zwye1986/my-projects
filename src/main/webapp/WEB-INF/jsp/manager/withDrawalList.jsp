<%@ page language="java" pageEncoding="UTF-8" %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %><%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %><c:set var="ctx" value="${pageContext.request.contextPath }"       scope="request"></c:set><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>提现纪录查询</title><link href="${ctx }/css/manager/main.css" rel="stylesheet"/><link rel="stylesheet" href="${ctx }/css/jquery_maklon_tools.css"/><link href="${ctx }/css/jquery.msgbox.css" rel="stylesheet"      type="text/css"/><link rel="stylesheet" href="${ctx }/css/zTreeStyle.css" type="text/css"><script type="text/javascript" src="${ctx }/js/jquery/jquery-1.6.4.js"></script><script type="text/javascript" src="${ctx }/js/jquery.maklon.tools.js"></script><script type="text/javascript" src="${ctx }/js/jquery.msgbox.js"></script><script type="text/javascript" src="${ctx }/js/jquery.ztree.core-3.5.js"></script><script type="text/javascript" src="${ctx }/js/page.js"></script><script type="text/javascript"        src="${ctx }/js/jquery.ztree.excheck-3.5.js"></script><script type="text/javascript"        src="${ctx}/js/jquery-ui-1.10.3.custom.min.js"></script><link href="${ctx }/css/jquery-ui-1.10.3.custom.min.css"      rel="stylesheet"/><style type="text/css">    <!--    body {        margin-left: 3px;        margin-top: 0px;        margin-right: 3px;        margin-bottom: 0px;        background-color: #f1f1f2;        color: #5c5c5c;    }    .cx {        width: 59px;        height: 22px;        background: url(${ctx}/images/admin/cx_btn.png) no-repeat;        cursor: pointer;        border: none;        color: #fff;    }    em {        font-style: normal;        color: #fff;    }    .txt {        color: #fff;    }    .STYLE1 {        color: #fff;        font-size: 16px;    }    .STYLE6 {        color: #000000;        font-size: 12;    }    .STYLE10 {        color: #000000;        font-size: 12px;    }    .STYLE19 {        color: #344b50;        font-size: 12px;    }    .STYLE21 {        font-size: 12px;        color: #3b6375;        position: relative;    }    .STYLE22 {        font-size: 12px;        color: #295568;    }    .id, .phone, .user {        width: 45%;        height: 22px;    }    .selected td {        background: #e1f6f1;    }    #del td {        background: #D6614D;    }    .date {        height: 22px;        width: 25%;    }    .money {        height: 22px;        width: 15%;    }    #btn {        width: 86px;        height: 31px;        background: url(/images/search_btn.png) no-repeat;        border: none;        cursor: pointer;        margin-left: 5px;    }    --></style><script type="text/javascript">    $(document).ready(            function () {                var amount = 0;                $("td[name='amount']").each(function () {                    amount += parseFloat($(this).html());                });                $("#total").html(amount.toFixed(2).toString());                $("#data tbody tr").hover(function () {                    $(this).addClass('selected');                }, function () {                    $(this).removeClass('selected');                });                $("#sb").click(function () {                    $("input[name='currentPage']").val(1);                    $("#mainForm").attr("method", "post").submit();                });                $("#exp").click(function () {                    $("#mainForm").attr("action", "${ctx}/manager/${condition.type }/exportWithdrawalRecordQueryResult.html");                    $("#mainForm").attr("method", "post").submit();                    $("#mainForm").attr("action", "${ctx}/manager/${condition.type }/withDrawalList");                });                var date1 = $("#dateTimeBegin").val();                $("#dateTimeBegin").datepicker({                    changeMonth: true,                    changeYear: true                });                $("#dateTimeBegin").datepicker("option", "dateFormat", "yy-mm-dd");                $("#dateTimeBegin").val(date1);                var date2 = $("#dateTimeEnd").val();                $("#dateTimeEnd").datepicker({                    changeMonth: true,                    changeYear: true                });                $("#dateTimeEnd").datepicker("option", "dateFormat", "yy-mm-dd");                $("#dateTimeEnd").val(date2);                var date3 = $("#withdrawalSuccessTime").val();                $("#withdrawalSuccessTime").datepicker({                    changeMonth: true,                    changeYear: true                });                $("#withdrawalSuccessTime").datepicker("option", "dateFormat",                        "yy-mm-dd");                $("#withdrawalSuccessTime").val(date3);                var date4 = $("#cashDayBegin").val();                $("#cashDayBegin").datepicker({                    changeMonth: true,                    changeYear: true                });                $("#cashDayBegin").datepicker("option", "dateFormat", "yy-mm-dd");                $("#cashDayBegin").val(date4);                var date5 = $("#cashDayEnd").val();                $("#cashDayEnd").datepicker({                    changeMonth: true,                    changeYear: true                });                $("#cashDayEnd").datepicker("option", "dateFormat", "yy-mm-dd");                $("#cashDayEnd").val(date5);                $("#resList tbody tr").hover(function () {                    $(this).addClass("selected");                }, function () {                    $(this).removeClass("selected");                });            });    function showDetail(serialNumber, userid, mobileNumber, type) {        $.showPanel("订单详情", "${ctx }/manager/" + serialNumber + "/" + userid                        + "/" + mobileNumber + "/" + type + "/showWithDrawDetail", 600,                400, true, "${ctx}");        return;    }    function setDealStatus(serialNumber) {        if (confirm("您确定该用户的提现打款成功了吗？")) {            $.post("${ctx}/manager/" + serialNumber + "/setDealStatus", {},                    function (data) {                        if (data.resCode == 1) {                            alert(data.resMsg);                        } else {                            alert(data.resMsg);                            document.mainForm.submit();                        }                    });        }    }    function setDealStatusFreeze(serialNumber) {        if (confirm("您确定冻结该用户吗？")) {            $.post("${ctx}/manager/" + serialNumber + "/setDealStatusFreeze", {},                    function (data) {                        if (data.resCode == 1) {                            alert(data.resMsg);                        } else {                            alert(data.resMsg);                            document.mainForm.submit();                        }                    });        }    }    function setDealStatusThaw(serialNumber) {        if (confirm("您确定解冻该用户吗？")) {            $.post("${ctx}/manager/" + serialNumber + "/setDealStatusThaw", {},                    function (data) {                        if (data.resCode == 1) {                            alert(data.resMsg);                        } else {                            alert(data.resMsg);                            document.mainForm.submit();                        }                    });        }    }    function setDealStatusFail(serialNumber) {        if (confirm("您确定该用户的提现打款失败，需要退还至用户账户吗？")) {            $.post("${ctx}/manager/" + serialNumber + "/setDealStatusFail", {},                    function (data) {                        if (data.resCode == 1) {                            alert(data.resMsg);                        } else {                            alert(data.resMsg);                            document.mainForm.submit();                        }                    });        }    }</script></head><body style="padding: 25px;"><form id="expForm"></form><form action="${ctx }/manager/${condition.type }/withDrawalList"      method="get" target="_self" id="mainForm" name="mainForm">    <table width="100%" border="0" align="center" cellpadding="0"           cellspacing="0">        <tr>            <td height="30">                <table width="100%" border="0" cellspacing="0"                       cellpadding="0">                    <tr>                        <td height="62" bgcolor="#3b3a3f"                            style="border-bottom: 1px solid #d5d1c8; border-top: 1px solid #d5d1c8; padding: 0 20px;">                            <table                                    width="100%" border="0" cellspacing="0" cellpadding="0">                                <tr>                                    <td style="width: 15%;"><label class="txt">手机号码：</label>                                        <input type="hidden" name="$.type" value="${condition.type }"/>                                        <input type="text" name="$.mobileNumber" class="phone"                                               value="${condition.mobileNumber}"></td>                                    <td style="width: 15%;"><label class="txt">姓名：</label> <input                                            type="text" name="$.name" class="user"                                            value="${condition.name}"></td>                                    <td style="width: 30%">                                        <div align="left" style="height: 32px; line-height: 32px;">												<span class="STYLE1"> <em>提现时间：</em> <input                                                        type="text" class="date" name="$.dateTimeBegin"                                                        id="dateTimeBegin"                                                        value="${fn:substring(condition.dateTimeBegin,0,10) }">													－ <input type="text" class="date" name="$.dateTimeEnd"                                                             id="dateTimeEnd"                                                             value="${fn:substring(condition.dateTimeEnd,0,10) }">												</span>                                        </div>                                    </td>                                    <td>                                        <div align="left">												<span class="STYLE1"> <em style="float: left;">状态：</em>													<select name="$.status" id="status">                                                        <option value="">全部</option>                                                        <option value="0"                                                                <c:if test="${condition.status eq 0 }">selected="selected"</c:if>>                                                            成功                                                        </option>                                                        <option value="1"                                                                <c:if test="${condition.status eq 1 }">selected="selected"</c:if>>                                                            失败                                                        </option>                                                        <option value="2"                                                                <c:if test="${condition.status eq 2 }">selected="selected"</c:if>>                                                            处理中                                                        </option>                                                        <option value="3"                                                                <c:if test="${condition.status eq 3 }">selected="selected"</c:if>>                                                            冻结中                                                        </option>                                                    </select>												</span>                                        </div>                                    </td>                                    <td><input type="checkbox" name="$.cashDay" value="1"                                               <c:if test="${not empty condition.cashDay }">checked="checked"</c:if> />                                        <em>只显示今天到账</em></td>                                </tr>                            </table>                        </td>                    </tr>                </table>            </td>        </tr>        <tr>            <td height="30">                <table width="100%" border="0" cellspacing="0"                       cellpadding="0">                    <tr>                        <td height="62" bgcolor="#3b3a3f"                            style="border-bottom: 1px solid #d5d1c8; border-top: 1px solid #d5d1c8; padding: 0 20px;">                            <table                                    width="100%" border="0" cellspacing="0" cellpadding="0">                                <tr>                                    <td style="width: 40%">                                        <div align="left" style="height: 32px; line-height: 32px;">												<span class="STYLE1"> <em>预计到账时间：</em> <input                                                        type="text" class="date" name="$.cashDayBegin"                                                        id="cashDayBegin"                                                        value="${fn:substring(condition.cashDayBegin,0,10) }"/> －													<input type="text" class="date" name="$.cashDayEnd"                                                           id="cashDayEnd"                                                           value="${fn:substring(condition.cashDayEnd,0,10) }">												</span>                                        </div>                                    </td>                                    <td>                                        <div align="left" style="height: 32px; line-height: 32px;">												<span class="STYLE1"> <em>提现成功时间：</em>												<input class="id" type="text" name="$.withdrawalSuccessTime"                                                       id="withdrawalSuccessTime"                                                       value="${condition.withdrawalSuccessTime }"/>												</span>                                        </div>                                    </td>                                    <td><input type="button" class="cx" id="sb" value="查询"/></td>                                    <td><input type="button" class="cx" id="exp" value="::导出::"/></td>                                </tr>                            </table>                        </td>                    </tr>                </table>            </td>        </tr>        <tr>            <td height="10"></td>        </tr>        <tr>            <td>                <table id="data" width="100%" border="0" cellpadding="0"                       cellspacing="1" bgcolor="#e2e2e2">                    <tr>                        <td width="3%" bgcolor="e5e6e6" class="STYLE6" height="40">序号                            <input type="hidden" name="pageSize" id="page.pageSize"                                   value="${page.pageSize }"/> <input type="hidden"                                                                      name="currentPage" id="page.currentPage"                                                                      value="${page.currentPage }"/>                        </td>                        <td bgcolor="e5e6e6" class="STYLE6">姓名</td>                        <td bgcolor="e5e6e6" class="STYLE6">手机号码</td>                        <td bgcolor="e5e6e6" class="STYLE6">提现金额</td>                        <td bgcolor="e5e6e6" class="STYLE6">提现时间</td>                        <td bgcolor="e5e6e6" class="STYLE6">状态</td>                        <td bgcolor="e5e6e6" class="STYLE6">卡号</td>                        <td bgcolor="e5e6e6" class="STYLE6">预计到账时间</td>                        <!-- <td bgcolor="e5e6e6" class="STYLE6">VIP预计到账时间</td> -->                        <%-- <td bgcolor="e5e6e6" class="STYLE6">成功到账时间</td>--%>                        <td bgcolor="e5e6e6" class="STYLE6">操作</td>                    </tr>                    <tbody>                    <c:forEach items="${list }" var="item" varStatus="s" begin="0">                        <tr <c:if test="${item.cardStatus eq 0 }"> id="del" </c:if>>                            <td height="40" bgcolor="#FFFFFF"                                class="STYLE6">${(page.currentPage-1)*page.pageSize+(s.index+1) }</td>                            <td bgcolor="#FFFFFF" class="STYLE6">${item.userName }</td>                            <td bgcolor="#FFFFFF" class="STYLE6">${item.mobileNumber }</td>                            <td bgcolor="#FFFFFF" class="STYLE6" name="amount">${item.amount }</td>                            <td bgcolor="#FFFFFF" class="STYLE6"><fmt:formatDate                                    value="${item.dateTime }" pattern="yyyy-MM-dd HH:mm:ss"/></td>                            <td bgcolor="#FFFFFF" class="STYLE6"><c:choose>                                <c:when test="${item.status eq 0 }">成功</c:when>                                <c:when test="${item.status eq 1 }">失败</c:when>                                <c:when test="${item.status eq 2 }">处理中</c:when>                                <c:when test="${item.status eq 3 }">冻结</c:when>                                <c:otherwise></c:otherwise>                            </c:choose></td>                            <td bgcolor="#FFFFFF" class="STYLE6">${item.cardNumber }</td>                            <td bgcolor="#FFFFFF" class="STYLE6"><fmt:formatDate                                    value="${item.cashDay }" pattern="yyyy-MM-dd HH:mm:ss"/><fmt:formatDate                                    value="${item.vipCashDay }" pattern="yyyy-MM-dd HH:mm:ss"/></td>                                <%-- <td bgcolor="#FFFFFF" class="STYLE6"><fmt:formatDate                                        value="${item.vipCashDay }" pattern="yyyy-MM-dd HH:mm:ss" /></td> --%>                                <%-- <td bgcolor="#FFFFFF" class="STYLE6"><fmt:formatDate                                value="${item.withdrawalSuccessTime }" pattern="yyyy-MM-dd HH:mm:ss" /></td>--%>                            <td height="40" bgcolor="#FFFFFF" class="STYLE21"><input                                    type="button" class="cx"                                    onclick="showDetail('${item.serialNumber }','${item.userId }','${item.mobileNumber }','${condition.type }');"                                    value="详情"> <c:if test="${item.status eq 2 }">                                <input type="button" class="cx"                                       onclick="setDealStatus('${item.serialNumber }');"                                       value="打款成功">                                <input type="button" class="cx"                                       onclick="setDealStatusFail('${item.serialNumber }');"                                       value="打款失败">                                <input type="button" class="cx"                                       onclick="setDealStatusFreeze('${item.serialNumber }');"                                       value="冻结">                            </c:if>                                <c:if test="${item.status eq 3 }">                                    <input type="button" class="cx"                                           onclick="setDealStatusThaw('${item.serialNumber }');"                                           value="解冻">                                </c:if>                            </td>                        </tr>                    </c:forEach>                    </tbody>                    <tr>                        <td height="40" colspan="10" style="text-align: center"                            bgcolor="#FFFFFF" class="STYLE6">本页总计：<span id="total"></span></td>                    </tr>                    <tr bgcolor="#FFFFFF">                        <td colspan="12" height="30">                            <%@include                                    file="../../PaginationMore.inc" %>                        </td>                    </tr>                </table>                <table width="100%" style="line-height: 48px;">                    <tr>                        <td align="center" style="color: #666;">苏ICP备13017605号                            2013江苏维纳达软件技术有限公司                        </td>                    </tr>                </table>            </td>        </tr>    </table></form></body></html>