<%@ page language="java" pageEncoding="UTF-8"%><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%><%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%><%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%><c:set var="ctx" value="${pageContext.request.contextPath }"	scope="request"></c:set><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>酷刷订单</title><script type="text/javascript"	src="${ctx }/js/jquery/jquery-1.9.1.min.js"></script><script type="text/javascript" src="${ctx }/js/page.js"></script><link href="${ctx }/css/manager/main.css" rel="stylesheet" /><link rel="stylesheet" href="${ctx }/css/jquery_maklon_tools.css" /><script type="text/javascript" src="${ctx }/js/jquery.maklon.tools.js"></script><script type="text/javascript"	src="${ctx}/js/jquery-ui-1.10.3.custom.min.js"></script><link href="${ctx }/css/jquery-ui-1.10.3.custom.min.css"	rel="stylesheet" /><style type="text/css"><!--body {	margin-left: 3px;	margin-top: 0px;	margin-right: 3px;	margin-bottom: 0px;	background-color: #f1f1f2;	color: #5c5c5c;}em {	font-style: normal;	color: #fff;}.txt {	color: #fff;}.STYLE1 {	color: #fff;	font-size: 16px;}.STYLE6 {	color: #000000;	font-size: 12;	text-align: center;}.STYLE10 {	color: #000000;	font-size: 12px;}.STYLE19 {	color: #344b50;	font-size: 12px;}.STYLE21 {	font-size: 12px;	color: #3b6375;	position: relative;}.STYLE22 {	font-size: 12px;	color: #295568;}.id,.phone,.user {	width: 60px;	height: 22px;}.date {	height: 22px;	width: 80px;}.money {	height: 22px;	width: 15%;}#btn {	width: 86px;	height: 31px;	background: url(${ctx}/images/admin/search_btn.png) no-repeat;	border: none;	cursor: pointer;	margin-left: 5px;}.cx {	width: 59px;	height: 22px;	background: url(${ctx}/images/admin/cx_btn.png) no-repeat;	cursor: pointer;	border: none;	color: #fff;}a.jsxg {	width: 15px;	text-align: center;	cursor: pointer;	color: #0cfec2;	margin-left: 5px;}.selected td {	background: #e1f6f1;}.tck {	width: 363px;	height: 268px;	position: absolute;	background: #fff;	right: 180px;	border: 1px solid #cacaca;	z-index: 2;	top: 265px;}.tck .tck_t {	width: 363px;	height: 40px;	background: #3b3a3f;	margin-top: 0px;	float: left;}.tck_xx {	width: 120px;	color: #fff;	height: 40px;	line-height: 40px;	font-size: 16px;	float: left;}.del {	float: right;	height: 40px;	width: 40px;	background: url(${ctx}/images/admin/del.png);	cursor: pointer;}.tck form {	width: 343px;	text-align: left;	color: #3b3a3f;	font-size: 12px;}.tck_list {	width: 343px;	line-height: 18px;}.tck_la {	width: 80px;	text-align: right;	float: left;	height: 18px;	line-height: 18px;	margin-right: 5px;}.czmm {	cursor: pointer;}.czmm:hover {	text-decoration: underline;}--></style><script type="text/javascript">	$(document).ready(function() {		$("#sb").click(function() {			$("input[name='currentPage']").val(1);			$("#mainForm").attr("method", "post").submit();		});				var date1 = $("#orderStartTime").val();	    var date2 = $("#orderEndTime").val();		$("#orderStartTime").datepicker({			changeMonth : true,			changeYear : true		});				$("#orderStartTime").datepicker("option", "dateFormat", "yy-mm-dd");		$("#orderEndTime").datepicker({			changeMonth : true,			changeYear : true		});		$("#orderEndTime").datepicker("option", "dateFormat", "yy-mm-dd");				$("#orderStartTime").val(date1);		$("#orderEndTime").val(date2);				$("#resList tbody tr").hover(function() {			$(this).addClass("selected");		}, function() {			$(this).removeClass("selected");		});	});	function showDetail(id) {		$.showPanel("订单详情", "${ctx }/manager/showOrderDetail?id=" + id, 600,				400, true, "${ctx}");		return;	}	function showOrderDetailToMod(id) {		$.showPanel("订单修改", "${ctx }/manager/toUpdateOrder?id=" + id, 600, 550,				true, "${ctx}");		return;	}	function cancelOrder(id) {		$.ajax({			type : "POST",			async : false,			cache : false,			dataType : "json",			data : {				id : id			},			url : "${ctx}/manager/valiOrderId",			success : function(data) {				if (data.resCode == 0) {					alert(data.resMsg);					return;				} else {					$("#mainForm").attr("method", "post").submit();				}			}		});	}</script></head><body style="padding: 25px;">	<table width="100%" cellspacing="0" cellpadding="0" border="0"		align="center">		<tbody>			<tr>				<td height="30"><form action="${ctx }/manager/orderList"						method="get" target="_self" id="mainForm" name="mainForm">						<table width="100%" cellspacing="0" cellpadding="0" border="0">							<tbody>								<tr>									<td height="62" bgcolor="#3b3a3f"										style="border-bottom: 1px solid #d5d1c8; border-top: 1px solid #d5d1c8; padding: 0 5px;"><table											width="100%" cellspacing="0" cellpadding="0" border="0">											<tbody>												<tr>													<td height="39"><table width="100%" cellspacing="0"															cellpadding="0" border="0">														</table></td>													<td>													<td><label class="txt">收件人号码：</label> <input														type="text" name="$.mobilePhone" class="phone"														value="${condition.mobilePhone}"></td>													<td><label class="txt">收件人姓名：</label> <input														type="text" name="$.attentionName" class="user"														value="${condition.attentionName}"></td>													<td><div align="left"															style="height: 32px; line-height: 32px; width: 90%">															<span class="STYLE1"> <em>订单生成时间：</em> <input																type="text" class="date" name="$.orderStartTime"																id="orderStartTime" value="${fn:substring(condition.orderStartTime,0,10) }">																－ <input type="text" class="date" name="$.orderEndTime"																id="orderEndTime" value="${fn:substring(condition.orderEndTime,0,10) }">															</span>														</div></td>													<td><div align="left"															style="height: 32px; line-height: 32px;">															<span class="STYLE1"> <em style="float: left;">订单状态：</em>																<select name="$.tradeStatus" id="tradeStatus">																	<option value="">全部</option>																	<option value="1"																		<c:if test="${condition.tradeStatus eq 1 }">selected = "selected"</c:if>>形成订单</option>																	<option value="2"																		<c:if test="${condition.tradeStatus eq 2 }">selected = "selected"</c:if>>交易完成</option>																	<option value="3"																		<c:if test="${condition.tradeStatus eq 3 }">selected = "selected"</c:if>>订单取消</option>																	<option value="4"																		<c:if test="${condition.tradeStatus eq 4 }">selected = "selected"</c:if>>支付中</option>																	<option value="5"																		<c:if test="${condition.tradeStatus eq 5 }">selected = "selected"</c:if>>支付失败</option>																	<option value="6"																		<c:if test="${condition.tradeStatus eq 6 }">selected = "selected"</c:if>>支付超时</option>															</select>															</span>														</div></td>													<td><div align="left"															style="height: 32px; line-height: 32px;">															<span class="STYLE1"> <em>处理状态：</em> <select																name="$.dealStatus" id="dealStatus">																	<option value="">全部</option>																	<option value="0"																		<c:if test="${condition.dealStatus eq 0 }">selected = "selected"</c:if>>未处理</option>																	<option value="1"																		<c:if test="${condition.dealStatus eq 1 }">selected = "selected"</c:if>>已处理</option>															</select>															</span>														</div></td>													<td><input type="button" class="cx" id="sb" value="查询" /></td>												</tr>											</tbody>										</table></td>								</tr>							</tbody>						</table>					</form></td>			</tr>			<tr>				<td height="10"></td>			</tr>			<tr>				<td><table width="100%" cellspacing="1" cellpadding="0"						id="resList" border="0" bgcolor="#e2e2e2">						<thead>							<tr>								<td width="3%" bgcolor="e5e6e6" class="STYLE6" height="40">序号</td>								<td bgcolor="e5e6e6" class="STYLE6">数量</td>								<td bgcolor="e5e6e6" class="STYLE6">单价（元）</td>								<td bgcolor="e5e6e6" class="STYLE6">总价（元）</td>								<td bgcolor="e5e6e6" class="STYLE6">订单生成时间</td>								<td bgcolor="e5e6e6" class="STYLE6">交易方式</td>								<td bgcolor="e5e6e6" class="STYLE6">交易状态</td>								<td bgcolor="e5e6e6" class="STYLE6">支付时间</td>								<td bgcolor="e5e6e6" class="STYLE6">处理状态</td>								<td bgcolor="e5e6e6" class="STYLE6">操作</td>							</tr>						</thead>						<tbody>							<c:forEach items="${orderList }" var="item" varStatus="s"								begin="0">								<tr bgcolor="#FFFFFF">									<td height="40" bgcolor="#FFFFFF" class="STYLE6">${(page.currentPage-1)*page.pageSize+(s.index+1) }</td>									<td bgcolor="#FFFFFF" class="STYLE6">${item.num }</td>									<td bgcolor="#FFFFFF" class="STYLE6">${item.price }</td>									<td bgcolor="#FFFFFF" class="STYLE6">${item.totalPrice }</td>									<td bgcolor="#FFFFFF" class="STYLE6"><fmt:formatDate											value="${item.orderTime }" pattern="yyyy-MM-dd HH:mm:ss" /></td>									<td bgcolor="#FFFFFF" class="STYLE6"><c:choose>											<c:when test="${item.isNegotiate eq 0 }">网上直接支付</c:when>											<c:when test="${item.isNegotiate eq 1 }">面谈</c:when>											<c:otherwise></c:otherwise>										</c:choose></td>									<td bgcolor="#FFFFFF" class="STYLE6"><c:choose>											<c:when test="${item.tradeStatus eq 0 }">未形成订单</c:when>											<c:when test="${item.tradeStatus eq 1}">形成订单</c:when>											<c:when test="${item.tradeStatus eq 2}">交易完成</c:when>											<c:when test="${item.tradeStatus eq 3}">订单取消</c:when>											<c:when test="${item.tradeStatus eq 4}">支付中</c:when>											<c:when test="${item.tradeStatus eq 5}">支付失败</c:when>											<c:when test="${item.tradeStatus eq 6}">支付超时</c:when>											<c:otherwise></c:otherwise>										</c:choose></td>									<td bgcolor="#FFFFFF" class="STYLE6"><fmt:formatDate											value="${item.payTime }" pattern="yyyy-MM-dd HH:mm:ss" /></td>									<td bgcolor="#FFFFFF" class="STYLE6"><c:choose>											<c:when test="${item.dealStatus eq 0 }">未处理</c:when>											<c:when test="${item.dealStatus eq 1 }">已处理</c:when>											<c:otherwise></c:otherwise>										</c:choose></td>									<td bgcolor="#FFFFFF" class="STYLE6"><input type="button"										class="cx" value="查看" onclick="showDetail('${item.id}')" /> <input										type="button" class="cx" value="修改"										onclick="showOrderDetailToMod('${item.id}')" /> <c:if											test="${item.tradeStatus eq 0 or item.tradeStatus eq 1 or item.tradeStatus eq 5 or item.tradeStatus eq 6}">											<input type="button" class="cx" value="取消订单"												onclick="cancelOrder('${item.id}');" />										</c:if></td>								</tr>							</c:forEach>						</tbody>					</table></td>			</tr>			<tr>				<td height="50"					style="background: #fafafb; border: 1px solid #e5e6e6; border-top: none; padding-left: 20px;">					<div class="footer">						<%@include file="../../PaginationMore.inc"%>					</div>				</td>			</tr>		</tbody>	</table>	<table width="100%" style="line-height: 48px;">		<tbody>			<tr>				<td align="center" style="color: #666;">苏ICP备13017605号					2013江苏维纳达软件技术有限公司</td>			</tr>		</tbody>	</table></body></html>