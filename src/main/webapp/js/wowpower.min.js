var JSON;
JSON || (JSON = {}); (function() {
    function a(a) {
        return 10 > a ? "0" + a: a
    }
    function b(a) {
        e.lastIndex = 0;
        return e.test(a) ? '"' + a.replace(e,
        function(a) {
            var b = j[a];
            return "string" === typeof b ? b: "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice( - 4)
        }) + '"': '"' + a + '"'
    }
    function c(a, d) {
        var e, j, n, p, q = f,
        l, h = d[a];
        h && "object" === typeof h && "function" === typeof h.toJSON && (h = h.toJSON(a));
        "function" === typeof k && (h = k.call(d, a, h));
        switch (typeof h) {
        case "string":
            return b(h);
        case "number":
            return isFinite(h) ? "" + h: "null";
        case "boolean":
        case "null":
            return "" + h;
        case "object":
            if (!h) return "null";
            f += g;
            l = [];
            if ("[object Array]" === Object.prototype.toString.apply(h)) {
                p = h.length;
                for (e = 0; e < p; e += 1) l[e] = c(e, h) || "null";
                n = 0 === l.length ? "[]": f ? "[\n" + f + l.join(",\n" + f) + "\n" + q + "]": "[" + l.join(",") + "]";
                f = q;
                return n
            }
            if (k && "object" === typeof k) {
                p = k.length;
                for (e = 0; e < p; e += 1)"string" === typeof k[e] && (j = k[e], (n = c(j, h)) && l.push(b(j) + (f ? ": ": ":") + n))
            } else for (j in h) Object.prototype.hasOwnProperty.call(h, j) && (n = c(j, h)) && l.push(b(j) + (f ? ": ": ":") + n);
            n = 0 === l.length ? "{}": f ? "{\n" + f + l.join(",\n" + f) + "\n" + q + "}": "{" + l.join(",") + "}";
            f = q;
            return n
        }
    }
    if ("function" !== typeof Date.prototype.toJSON) Date.prototype.toJSON = function() {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + a(this.getUTCMonth() + 1) + "-" + a(this.getUTCDate()) + "T" + a(this.getUTCHours()) + ":" + a(this.getUTCMinutes()) + ":" + a(this.getUTCSeconds()) + "Z": null
    },
    String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
        return this.valueOf()
    };
    var d = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    e = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    f, g, j = {
        "\u0008": "\\b",
        "\t": "\\t",
        "\n": "\\n",
        "\u000c": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
    },
    k;
    if ("function" !== typeof JSON.stringify) JSON.stringify = function(a, b, d) {
        var e;
        g = f = "";
        if ("number" === typeof d) for (e = 0; e < d; e += 1) g += " ";
        else "string" === typeof d && (g = d);
        if ((k = b) && "function" !== typeof b && ("object" !== typeof b || "number" !== typeof b.length)) throw Error("JSON.stringify");
        return c("", {
            "": a
        })
    };
    if ("function" !== typeof JSON.parse) JSON.parse = function(a, b) {
        function c(a, d) {
            var e, f, g = a[d];
            if (g && "object" === typeof g) for (e in g) Object.prototype.hasOwnProperty.call(g, e) && (f = c(g, e), void 0 !== f ? g[e] = f: delete g[e]);
            return b.call(a, d, g)
        }
        var e, a = "" + a;
        d.lastIndex = 0;
        d.test(a) && (a = a.replace(d,
        function(a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice( - 4)
        }));
        if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return e = eval("(" + a + ")"),
        "function" === typeof b ? c({
            "": e
        },
        "") : e;
        throw new SyntaxError("JSON.parse");
    }
})(); (function(a) {
    a.guang = a.guang || {
        version: "v1.0.0"
    };
    a.extend(a.guang, {
        util: {
            getUrlParam: function(a) {
                a = window.location.search.substr(1).match(RegExp("(^|&)" + a + "=([^&]*)(&|$)"));
                return null != a ? unescape(a[2]) : null
            },
            isIE6: function() {
                return a.browser.msie && "6.0" == a.browser.version ? !0 : !1
            },
            isIOS: function() {
                return /\((iPhone|iPad|iPod)/i.test(navigator.userAgent)
            },
            trim: function(a) {
                return a.replace(/(^\s*)|(\s*$)/g, "")
            },
            lTrim: function(a) {
                return a.replace(/(^\s*)/g, "")
            },
            rTrim: function(a) {
                return a.replace(/(\s*$)/g, "")
            },
            getStrLength: function(b) {
                var b = a.guang.util.trim(b),
                c = 0,
                b = b.replace(/[^\x00-\xff]/g, "**").length;
                return c = parseInt(b / 2) == b / 2 ? b / 2 : parseInt(b / 2) + 0.5
            },
            substring4ChAndEn: function(b, c) {
                for (var d = b.substring(0, 2 * c); a.guang.util.getStrLength(d) > c;) d = d.substring(0, d.length - 1);
                return d
            },
            htmlToTxt: function(a) {
                return a = a.replace(/\<|\>|\"|\'|\&/g,
                function(a) {
                    switch (a) {
                    case "<":
                        return "\uff1c";
                    case ">":
                        return "\uff1e";
                    case '"':
                        return "\uff3c";
                    case "'":
                        return "\uff07";
                    case "&":
                        return "\uff06"
                    }
                })
            },
            ellipse: function(b, c) {
                var d = 2 * a.guang.util.getStrLength(b) > c;
                return b && d ? b.replace(RegExp("([\\s\\S]{" + c + "})[\\s\\S]*"), "$1\u2026") : b
            },
            isEmpty: function(b) {
                return "" == a.guang.util.trim(b) ? !1 : !0
            },
            isEmail: function(a) {
                return /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)
            },
            isNick: function(a) {
                return /^[a-zA-Z\d\u4e00-\u9fa5_-]*$/.test(a)
            },
            nickMin: function(b) {
                return 4 > 2 * a.guang.util.getStrLength(b) ? !1 : !0
            },
            nickMax: function(b) {
                return 30 < 2 * a.guang.util.getStrLength(b) ? !1 : !0
            },
            tooShort: function(a, c) {
                return a.length < c ? !1 : !0
            },
            noLink: function(a) {
                return null == a.match(/(http[s]?:\/\/)?[a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+/) ? !0 : !1
            },
            getPosition: function(b) {
                var c = b.offset().top,
                d = b.offset().left,
                e = c + b.outerHeight(),
                f = d + b.outerWidth(),
                g = d + b.outerWidth() / 2,
                j = c + b.outerHeight() / 2;
                /iPad/i.test(navigator.userAgent) && (c -= a(window).scrollTop(), e -= a(window).scrollTop(), j -= a(window).scrollTop());
                return {
                    leftTop: function() {
                        return {
                            x: d,
                            y: c
                        }
                    },
                    leftMid: function() {
                        return {
                            x: d,
                            y: j
                        }
                    },
                    leftBottom: function() {
                        return {
                            x: d,
                            y: e
                        }
                    },
                    topMid: function() {
                        return {
                            x: g,
                            y: c
                        }
                    },
                    rightTop: function() {
                        return {
                            x: f,
                            y: c
                        }
                    },
                    rightMid: function() {
                        return {
                            x: f,
                            y: j
                        }
                    },
                    rightBottom: function() {
                        return {
                            x: f,
                            y: e
                        }
                    },
                    MidBottom: function() {
                        return {
                            x: g,
                            y: e
                        }
                    },
                    middle: function() {
                        return {
                            x: g,
                            y: j
                        }
                    }
                }
            },
            getDomain: function(a) {
                var c = "null",
                a = /[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.exec(a);
                "undefined" != typeof a && null != a && (c = a[0]);
                return c
            },
            validSite: function(b) {
                var c = a.guang.util.getDomain(b);
                if ( - 1 != b.indexOf("guang.com")) return "guang.com" == c && -1 != b.indexOf("baobei/") ? "guang": !1;
                if ( - 1 != b.indexOf("tmall.com")) {
                    var d = !0,
                    e;
                    e = ("detail.tmall.com" == c || "item.tmall.com" == c) && -1 != b.indexOf("item.htm?");
                    bool4 = ("detail.tmall.com" == c || "item.tmall.com" == c) && -1 != b.indexOf("spu_detail.htm?");
                    switch (d) {
                    case e:
                        return "tmall3";
                    case bool4:
                        return "tmall4";
                    default:
                        return ! 1
                    }
                } else if ( - 1 != b.indexOf("taobao.com")) switch (d = !0, b = ("item.taobao.com" == c || "item.beta.taobao.com" == c || "item.lp.taobao.com" == c) && -1 != b.indexOf("item.htm?"), d) {
                case b:
                    return "taobao";
                default:
                    return ! 1
                } else {
                    if ( - 1 != b.indexOf("item.buy.qq.com")) return "item.buy.qq.com" == c ? "qqbuy": !1;
                    if ( - 1 != b.indexOf("vancl.com")) switch (b = "item.vancl.com" == c && -1 == b.indexOf("ch_vt"), c = "item.vt.vancl.com" == c, !0) {
                    case b:
                        return "vancl";
                    case c:
                        return "vancl";
                    default:
                        return ! 1
                    } else return - 1 != b.indexOf("www.mbaobao.com") ? "www.mbaobao.com" == c && -1 != b.indexOf("item/") ? "mbaobao": !1 : -1 != b.indexOf("auction1.paipai.com") ? "auction1.paipai.com" == c ? "paipai": !1 : !1
                }
            },
            openWin: function(a) {
                var c = a.substr(a.lastIndexOf("snsType=") + 8, 1);
                4 == c || 5 == c ? (c = 820 < document.body.clientWidth ? (document.body.clientWidth - 820) / 2 : 0, window.open(a, "connect_window", "height=700, width=820, toolbar=no, menubar=no, scrollbars=yes, resizable=no,top=190,left=" + c + ", location=no, status=no")) : 8 == c ? (c = (document.body.clientWidth - 580) / 2, window.open(a, "connect_window", "height=620, width=580, toolbar=no, menubar=no, scrollbars=yes, resizable=no,top=190,left=" + c + ", location=no, status=no")) : 9 == c ? (c = 900 < document.body.clientWidth ? (document.body.clientWidth - 900) / 2 : 0, window.open(a, "connect_window", "height=550, width=900, toolbar=no, menubar=no, scrollbars=yes, resizable=no,top=190,left=" + c + ", location=no, status=no")) : (c = (document.body.clientWidth - 580) / 2, window.open(a, "connect_window", "height=420, width=580, toolbar=no, menubar=no, scrollbars=yes, resizable=no,top=190,left=" + c + ", location=no, status=no"))
            },
            moveEnd: function(a) {
                a.focus();
                var c = a.value.length;
                if (document.selection) a = a.createTextRange(),
                a.moveStart("character", c),
                a.collapse(),
                a.select();
                else if ("number" == typeof a.selectionStart && "number" == typeof a.selectionEnd) a.selectionStart = a.selectionEnd = c
            },
            submitByEnter: function(a, c) {
                a = a || window.event;
                13 == (a ? a.charCode || a.keyCode: 0) && c()
            },
            isNULL: function(b) {
                return null == b || 0 == a.guang.util.trim(b).length ? !0 : !1
            },
            isValidURL: function(b) {
                var c = /^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(\S+\.\S+)$/;
                return ! a.guang.util.isNULL(b) && (b = a.guang.util.trim(b), null != b.match(c)) ? !0 : !1
            },
            getUserPhoto: function(a, c) {
                var d = "http://static.guang.com/images/user/photo/avatar-" + c + ".png";
                if (a) {
                    var e = RegExp("u[^.]+_" + c + "(X|x)" + c + ".jpg").exec(a)[0];
                    return "" == e ? d: "http://img.guang.com/" + e
                }
                return d
            }
        }
    });
    a.fn.extend({
        returntop: function() {
            if (this[0]) {
                var b = this.click(function() {
                    a("html, body").animate({
                        scrollTop: 0
                    },
                    500);
                    var c = a(window).height() + 80 + "px";
                    b.data("isClick", !0);
                    b.css("bottom", c)
                }),
                c = null;
                a(window).bind("scroll",
                function() {
                    var d = a(document).scrollTop(),
                    e = a(window).height();
                    0 < d ? b.data("isClick") || b.css({
                        opacity: 1,
                        bottom: "0px"
                    }) : b.css({
                        opacity: 0,
                        bottom: "-200px"
                    }).data("isClick", !1);
                    a.guang.util.isIE6() && (b.hide(), clearTimeout(c), c = setTimeout(function() {
                        b.show();
                        clearTimeout(c)
                    },
                    1E3), b.css("top", d + e - 125))
                })
            }
        },
        resizeImage: function(b, c) {
            this.each(function() {
                var d = a(this)[0],
                e = d.width,
                f = d.height;
                if (! (e <= b && f <= c)) if (e <= b && f > c) d.width = e * c / f,
                d.height = c;
                else if (e > b && f <= c) d.width = b,
                d.height = f * b / e;
                else if (d.width = b, d.height = f * b / e, f * b / e > c) d.width = e * c / f,
                d.height = c
            })
        },
        textareaAutoHeight: function() {
            var b = this,
            c = b.outerHeight();
            b.bind("keyup input propertychange focus",
            function() {
                0 > c && (c = b.outerHeight()); (a.browser.mozilla || a.browser.safari) && b.height(c);
                var d = b[0].scrollHeight,
                e = d < c ? c: d,
                e = e < 1.5 * c ? c: d;
                b.height(e)
            })
        },
        disableBtn: function(a) {
            this[0].disabled = "disabled";
            this.removeClass(a).addClass("disabled")
        },
        enableBtn: function(a) {
            this[0].disabled = "";
            this.removeClass("disabled").addClass(a)
        },
        dropDown: function(b) {
            var c = {
                event: "mouseover",
                classNm: ".dropdown",
                timer: null,
                fadeSpeed: 100,
                duration: 500,
                offsetX: 82,
                offsetY: 8,
                isLocation: !1
            };
            b && a.extend(c, b);
            var d = a(c.classNm);
            this.each(function() {
                $this = a(this);
                $this.hover(function() {
                    clearTimeout(c.timer);
                    a(".dropdown:not(" + c.classNm + ")").hide();
                    if (c.isLocation) {
                        var b = a.guang.util.getPosition(a(this)).rightBottom();
                        d.css({
                            left: b.x - c.offsetX + "px",
                            top: b.y + c.offsetY + "px"
                        })
                    }
                    d.fadeIn(c.fadeSpeed)
                },
                function() {
                    c.timer = setTimeout(function() {
                        d.fadeOut(c.fadeSpeed)
                    },
                    c.duration)
                });
                d.hover(function() {
                    clearTimeout(c.timer);
                    d.show()
                },
                function() {
                    c.timer = setTimeout(function() {
                        d.fadeOut(c.fadeSpeed)
                    },
                    c.duration)
                })
            })
        },
        insertAtCursor: function(b) {
            var c = a(this)[0];
            if (document.selection) this.focus(),
            sel = document.selection.createRange(),
            sel.text = b,
            this.focus();
            else if (c.selectionStart || "0" == c.selectionStart) {
                var d = c.selectionStart,
                e = c.selectionEnd,
                f = c.scrollTop;
                c.value = c.value.substring(0, d) + b + c.value.substring(e, c.value.length);
                this.focus();
                c.selectionStart = d + b.length;
                c.selectionEnd = d + b.length;
                c.scrollTop = f
            } else this.value += b,
            this.focus()
        }
    })
})(jQuery); (function(a) {
    a("a[rel=loginD]")[0] && a("a[rel=loginD]").click(function(b) {
        b.preventDefault();
        a.guang.dialog.login()
    });
    a.guang.dialog = {
        isLogin: function(b) {
            return "" == "" ? (a.guang.dialog.login(b), !1) : !0
        },
        login: function(b) {
            if (a("#loginDialog")[0]) a("#loginDialog").data("overlay").load();
            else {
                var c;
                c = '<div id="loginDialog" class="g-dialog"><div class="dialog-content"><div class="hd"><h3>\u767b\u5f55</h3></div><div class="bd clearfix">';
                b && b.tips && (c += b.tips);
                c = c + '<div class="bd-l">' + ('<form id="J_LoginDForm" action="' + "" + '/doEmailLogin" method="POST">');
                c += '<input type="hidden" name="loginSaltCode" value="' + GUANGER.loginCode + '" />';
                c = c + '<div class="error-row"><p class="error"></p></div><div class="form-row"><label>Email\uff1a</label><input type="text" class="base-input" name="email" id="email" value="" placeholder="" /></div><div class="form-row"><label>\u5bc6\u7801\uff1a</label><input type="password" class="base-input" name="password" id="password" value="" /></div><div class="form-row"><label>&nbsp;</label><input type="checkbox" class="check" name="remember" value="1" checked="checked" /><span>\u4e24\u5468\u5185\u81ea\u52a8\u767b\u5f55</span></div><div class="form-row act-row clearfix"><label>&nbsp;</label><input type="submit" class="bbl-btn login-submit" value="\u767b\u5f55" />' + ('<a class="ml10 l30" href="' + "" + '/resetpwd">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a></div>');
                c = c + '</form></div><div class="bd-r"><p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u5e10\u53f7\u767b\u5f55</p><div class="snslogin mt15 clearfix"><ul class="fl mr20 outlogin-b">' + ('<li><a class="l-qq" href="' + "" + '/snsLogin?snsType=qzone&backType=asyn">QQ\u5e10\u53f7\u767b\u5f55</a></li>');
                c += '<li><a class="l-sina" href="' + "" + '/snsLogin?snsType=sina&backType=asyn">\u65b0\u6d6a\u5fae\u535a\u767b\u5f55</a></li>';
                c += '<li><a class="l-tao" href="' + "" + '/snsLogin?snsType=taobao&backType=asyn">\u6dd8\u5b9d\u5e10\u53f7\u767b\u5f55</a></li>';
                c = c + '</ul><ul class="fl outlogin-s share-link">' + ('<li><a class="s-alipay" href="' + "" + '/snsLogin?snsType=alipay&backType=asyn">\u652f\u4ed8\u5b9d</a></li>');
                c += '<li><a class="s-tencent" href="' + "" + '/snsLogin?snsType=tec_weibo&backType=asyn">\u817e\u8baf\u5fae\u535a</a></li>';
                c += '<li><a class="s-renren" href="' + "" + '/snsLogin?snsType=renren&backType=asyn">\u4eba\u4eba\u7f51</a></li>';
                a("body").append(c + '</ul></div></div></div><a class="close" href="javascript:;"></a></div></div>');
                a("#loginDialog").overlay({
                    top: "center",
                    mask: {
                        color: "#000",
                        loadSpeed: 200,
                        opacity: 0.3
                    },
                    closeOnClick: !1,
                    load: !0
                });
                a("#J_LoginDForm").submit(function() {
                    $this = a(this);
                    a.post($this.attr("action"), $this.serializeArray(),
                    function(b) {
                        100 == b.code ? (a("#loginDialog").overlay().close(), window.location.reload()) : 101 == b.code && (a("#loginDialog").find(".error-row").fadeIn(), a("#loginDialog").find(".error").html(b.message), a("#loginDialog input[name=password]").val(""))
                    });
                    return ! 1
                });
                a(".snslogin a").unbind("click").click(function() {
                    if (a(this).hasClass("s-douban")) a("#loginDialog").overlay().close(),
                    setTimeout(function() {
                        a.guang.dialog.doubanTip()
                    },
                    500);
                    else {
                        var b = a(this).attr("href");
                        a.guang.util.openWin(b)
                    }
                    return ! 1
                });
                a("#loginDialog").overlay().getClosers().bind("click",
                function() {
                    a("#J_LoginDForm")[0].reset();
                    a("#loginDialog").find(".error-row").hide()
                })
            }
        },
        doubanTip: function() {
            if (a("#dbTipDialog")[0]) a("#dbTipDialog").data("overlay").load();
            else {
                var b;
                b = '<div id="dbTipDialog" class="g-dialog"><div class="dialog-content"><div class="hd"><h3>\u81f4\u8c46\u74e3\u7528\u6237\uff1a</h3></div><div class="bd clearfix"><p>\u7531\u4e8e\u8fd1\u671f\u8c46\u74e3\u5f00\u653e\u5e73\u53f0\u63a5\u53e3\u4e0d\u7a33\u5b9a\uff0c\u6211\u4eec\u5df2\u6682\u505c\u8be5\u5e10\u6237\u7684\u767b\u9646\u64cd\u4f5c\uff0c\u56e0\u6b64\u6b21\u8c03\u6574\u7ed9\u60a8\u5e26\u6765\u7684\u4e0d\u4fbf\u8868\u793a\u6b49\u610f\u3002</p><p>\u60a8\u53ef\u4ee5\u7ee7\u7eed\u901a\u8fc7\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u767b\u9646\uff3b\u901b\uff3d\uff0c\u611f\u8c22\u60a8\u7684\u7406\u89e3\uff01</p><div class="clearfix other-login">' + ('<a class="l-qq" href="' + "" + '/snsLogin?snsType=qzone&backType=asyn">QQ\u5e10\u53f7\u767b\u5f55</a>');
                b += '<a class="l-sina" href="' + "" + '/snsLogin?snsType=sina&backType=asyn">\u65b0\u6d6a\u5fae\u535a\u767b\u5f55</a>';
                b += '<a class="l-tao" href="' + "" + '/snsLogin?snsType=taobao&backType=asyn">\u6dd8\u5b9d\u5e10\u53f7\u767b\u5f55</a> ';
                a("body").append(b + '</div></div><a class="close" href="javascript:;"></a></div></div>');
                a("#dbTipDialog").overlay({
                    top: "center",
                    mask: {
                        color: "#000",
                        loadSpeed: 200,
                        opacity: 0.3
                    },
                    closeOnClick: !1,
                    load: !0
                });
                a(".other-login a").unbind("click").click(function() {
                    var b = a(this).attr("href");
                    a.guang.util.openWin(b);
                    return ! 1
                })
            }
        }
    }
})(jQuery); (function(a) {
    a.guang.wordCount = {
        conf: {
            okClk: function() {},
            errorClk: function() {}
        },
        init: function(b, c, d, e) {
            function f() {
                c.text(g - parseInt(m()))
            }
            var g = d,
            j = e || 15,
            k = -1 != e,
            o = b[0],
            m = function() {
                var c = a.trim(b.val());
                return a.guang.util.getStrLength(c)
            };
            f();
            b.bind("keypress",
            function(a) {
                m() >= g && "0" != a.charCode && a.preventDefault()
            });
            b.bind("keyup",
            function() {
                f();
                if (m() >= g) if (k) {
                    o.value = o.value.substr(0, 2 * g + 100);
                    var c = setInterval(function() {
                        m() <= g ? (c = clearInterval(c), f()) : (o.value = o.value.substring(0, o.value.length - 1), a.guang.wordCount.conf.errorClk(o.value.length))
                    },
                    j)
                } else b[0].value = o.value.substr(0, g)
            }).focus(function() {
                f()
            })
        }
    };
    a.guang.tipForOper = {
        conf: {
            html: ""
        },
        init: function() {
            if (a("#J_TipForOper")[0]) a("#J_TipForOper").data("overlay").load();
            else {
                var b;
                a("body").append('<div id="J_TipForOper" class="g-dialog tip-for-oper"><div class="dialog-content"><div class="bd clearfix"></div></div></div>');
                a("#J_TipForOper").overlay({
                    top: "center",
                    mask: {
                        color: "#000",
                        loadSpeed: 200,
                        opacity: 0.3
                    },
                    closeOnClick: !1,
                    load: !0
                })
            }
            a("#J_TipForOper").find(".bd").html(a.guang.tipForOper.conf.html);
            a("#J_TipForOper .closeD").click(function() {
                a("#J_TipForOper").overlay().close()
            })
        }
    };
    a.guang.bindSnsShare = {
        init: function(b) {
            var c = {
                sina: '<li class="share-switch ss-sina-btnclick-on btnclick" data-status="on" data-snsid="sina" data-webname="ss-sina"></li>',
                tec_weibo: '<li class="share-switch ss-tencent-btnclick-on btnclick" data-status="on" data-snsid="tec_weibo" data-webname="ss-tencent"></li>'
            };
            a.ajax({
                url: "" + "/account/getUserSns.html",
                type: "post",
                dataType: "json",
                success: function(d) {
                    if (100 == d.code) {
                        for (var e = "",
                        d = d.userSns,
                        f = 0; f < d.length; f++) c[d[f]] && (e += c[d[f]]);
                        b.html(e);
                        a(".btnclick").bind("click",
                        function() {
                            var b = a(this),
                            c = b.attr("data-webname") + "-btnclick-on",
                            d = b.attr("data-webname") + "-btnclick-off";
                            "on" == b.data("status") ? b.removeClass(c).addClass(d).data("status", "off") : b.removeClass(d).addClass(c).data("status", "on")
                        })
                    }
                }
            })
        }
    }
})(jQuery); (function(a) {
    a.fn.textSlider = function(b) {
        b = a.extend({
            speed: "normal",
            step: 1,
            max: 5,
            timer: 1E3
        },
        b || {});
        return this.each(function() {
            a.fn.textSlider.scllor(a(this), b)
        })
    };
    a.fn.textSlider.scllor = function(b, c) {
        var d = b.find("ul:eq(0)"),
        e,
        f = d.children(),
        g = a(f[0]).outerHeight(),
        j = 0 - c.step * g,
        k = function() {
            d.animate({
                marginTop: j
            },
            c.speed,
            function() {
                for (i = 0; i < c.step; i++) d.find("li:first").removeClass("fade"),
                d.find("li:first").appendTo(d);
                d.css({
                    marginTop: 0
                });
                d.find("li:first").addClass("fade")
            })
        },
        g = function() {
            e = window.setInterval(k, c.timer)
        };
        f.length > c.max && g();
        d.hover(function() {
            window.clearInterval(e)
        },
        g)
    }
})(jQuery); (function(a) {
    a.guang.tip = {
        conf: {
            timer: null,
            timerLength: 3E3,
            tipClass: ""
        },
        show: function(b, c) {
            clearTimeout(a.guang.tip.conf.timer);
            var d = a.guang.util.getPosition(b).topMid();
            a(".tipbox")[0] || a("body").append('<div class="tipbox"></div>');
            a(".tipbox").attr("class", "tipbox " + a.guang.tip.conf.tipClass);
            a(".tipbox").html(c);
            var e = a(".tipbox").outerWidth(),
            f = a(".tipbox").outerHeight();
            a(".tipbox").css({
                left: d.x - e / 2 + "px",
                top: d.y - f - 10 + "px"
            }).fadeIn();
            a.guang.tip.conf.timer = setTimeout(function() {
                a(".tipbox").fadeOut()
            },
            a.guang.tip.conf.timerLength)
        }
    }
})(jQuery); (function(a) {
    a.fn.addPic = function(b) {
        b = a.extend({
            handler: function() {}
        },
        b || {});
        if (a("#J_AddPicD")[0]) a(".ap-input").val(""),
        a(".text-tip").html("");
        else {
            var c;
            a("body").append('<div id="J_AddPicD" class="g-dialog ap-dialog"><div class="content"><p class="pb5">\u5c06\u56fe\u7247\u7f51\u5740\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u6846\u4e2d\uff1a</p><form class="ap-form" name="addPic" action=""><div class="clearfix"><input class="base-input ap-input" name="photos" value="" placeholder="http://" /><input type="submit" class="sbl-btn src-sub" value="\u6dfb\u52a0" /></div><div class="text-tip"></div></form><a class="close" href="javascript:;"></a></div></div>');
            a(".ap-dialog .close").click(function() {
                a("#J_AddPicD").fadeOut("fast")
            });
            a("#J_AddPicD .ap-form").submit(function() {
                a(this);
                "" == a.guang.util.trim(a("#J_AddPicD .ap-input").val()) ? a(".text-tip").html('<span class="errc">\u56fe\u7247\u7f51\u5740\u4e0d\u80fd\u4e3a\u7a7a~</span>').show() : (b.handler(), a("#J_AddPicD").fadeOut("fast"));
                return ! 1
            })
        }
        c = a.guang.util.getPosition(this).topMid();
        var d = a("#J_AddPicD").outerWidth(),
        e = a("#J_AddPicD").outerHeight();
        a("#J_AddPicD").css({
            left: c.x - d / 2 + "px",
            top: c.y - e - 10 + "px"
        }).fadeIn("fast")
    };
    a.fn.addLocalPic = function() {
        var b = !0;
        if (!a("#J_AddPicD")[0]) {
            var c;
            c = '<div id="J_AddPicD" class="g-dialog ap-dialog"><div class="dialog-content"><div class="up-pic J_UpPic" style="position:absolute;top:34px;left:50px;">' + ('<form  id="J_PicUploadForm" target="picUploadTarget" action="' + "" + '/image/upload.html" method="post" enctype="multipart/form-data">');
            a("body").append(c + '<div class="photo-file-row clearfix"><button  id="J_BtnPic" class="bbl-btn upload-cover">\u4ece\u7535\u8111\u9009\u62e9\u56fe\u7247</button><input type="file" name="filedata" class="upload-btn" id="J_FileInput" onChange="window.submitPic(this)" size="1" hideFocus="true"/></div><div style="margin-top:5px;color:#666;"><span>\u4ec5\u652f\u6301JPG/JPEG/PNG/BMP\u56fe\u7247\u6587\u4ef6,\u6587\u4ef6\u5c0f\u4e8e2M,<br/>\u56fe\u7247\u5c3a\u5bf8\u5927\u5c0f250*250\uff5e1200*1800.</span></div><div class="text-tip"></div><input type="hidden" name="type" value="mongo" /></form></div><div class="loadding J_PicLoadding" style="visibility:hidden;position: absolute;bottom: 0px;left:50px;"></div><iframe name="picUploadTarget" id="picUploadTarget" width="0" height="0" style="display:none" frameborder="0" allowtransparent="yes" scrolling="no"></iframe><a class="close" href="javascript:;"></a></div></div>');
            a(".ap-dialog .close").click(function() {
                a("#J_AddPicD").fadeOut("fast")
            })
        }
        a(".text-tip").html("").hide();
        a(".J_PicLoadding:first").css("visibility", "hidden");
        c = a.guang.util.getPosition(this).topMid();
        var d = a("#J_AddPicD").outerWidth(),
        e = a("#J_AddPicD").outerHeight();
        a("#J_AddPicD").css({
            left: c.x - d / 2 + "px",
            top: c.y - e - 10 + "px"
        }).fadeIn("fast");
        window.submitPic = function(c) {
            a(".text-tip").html("").hide();
            a(".J_PicLoadding:first").css("visibility", "hidden");
            if (!b) return ! 1;
            var d = a(".J_PicLoadding:first");
            /\.(jpg|jpeg|png|bmp)$/i.test(a(c).val()) ? (a(c).closest("form").submit(), b = !1, d.html('<img src="http://static.guang.com/images/admin/loading.gif"/><br/>').css("visibility", "visible")) : (a(".text-tip").html('<span class="errc">\u4eb2,\u56fe\u7247\u683c\u5f0f\u4e0d\u5bf9.</span>').show(), b = !0)
        };
        window.publishPicSuccess = function(c, d) {
            var e = a(".J_PicLoadding:first"),
            k = a("#J_GoodsPubD .gallery-bd").scrollable();
            b = !0;
            switch (c) {
            case "100":
                setTimeout(function() {
                    a("#J_AddPicD").fadeOut("fast"); (new Image).src = d;
                    if (0 < a("#J_GoodsPubD .items img").length) if (8 > a("#J_GoodsPubD .items img").length) {
                        var b = '<li class="selected"><a href="javascript:;"><img src="' + d + '" alt="" /></a><i></i></li>';
                        a("#J_GoodsPubD .items ul:last").append(b);
                        a("#J_GoodsPubD .items img").resizeImage(94, 94)
                    } else 0 != a("#J_GoodsPubD .items img").length % 8 ? (b = '<li class="selected"><a href="javascript:;"><img src="' + d + '" alt="" /></a><i></i></li>', a("#J_GoodsPubD .items ul:last").append(b), a("#J_GoodsPubD .items img").resizeImage(94, 94)) : (b = '<ul><li class="selected"><a href="javascript:;"><img src="' + d + '" alt="" /></a><i></i></li></ul>', a("#J_GoodsPubD .items").append(b), a("#J_GoodsPubD .items img").resizeImage(94, 94), b = parseInt(a(".totalP").text()) + 1, a(".totalP").text(b), a(".curP").text(b)),
                    k.end();
                    else b = '<ul><li><a href="javascript:;"><img src="' + d + '" alt="" /></a><i></i></li></ul>',
                    a("#J_GoodsPubD .items").append(b),
                    a("#J_GoodsPubD .items img").resizeImage(94, 94)
                },
                1E3);
                break;
            case "101":
                a(".text-tip").html('<span class="errc">\u4eb2,\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u8bd5\u8bd5!</span>').show();
                e.css("visibility", "hidden");
                break;
            case "105":
                a(".text-tip").html('<span class="errc">\u4eb2,\u6ca1\u6709\u4e0a\u4f20\u56fe\u7247\u7684\u6743\u9650.</span>').show();
                e.css("visibility", "hidden");
                break;
            case "300":
                a(".text-tip").html('<span class="errc">\u4eb2,\u6ca1\u767b\u5f55.</span>').show();
                e.css("visibility", "hidden");
                break;
            case "800":
                a(".text-tip").html('<span class="errc">\u4eb2,\u56fe\u7247\u56fe\u7247\u5927\u5c0f\u8d85\u8fc72M.</span>').show();
                e.css("visibility", "hidden");
                break;
            case "801":
                a(".text-tip").html('<span class="errc">\u4eb2,\u56fe\u7247\u683c\u5f0f\u4e0d\u5bf9.</span>').show();
                e.css("visibility", "hidden");
                break;
            case "802":
                a(".text-tip").html('<span class="errc">\u4eb2,\u56fe\u7247\u5c3a\u5bf8\u4e0d\u7b26\u5408.</span>').show(),
                e.css("visibility", "hidden")
            }
        }
    };
    a.guang.ugc = {
        recomFlag: !1,
        pubJson: {},
        getCmt: function(b) {
            var c = a.guang.util.trim(a(b + " textarea[name=proComment]").val());
            return 1E3 < a.guang.util.getStrLength(c) ? (a(b + " .goods-act").find(".errc").show().html("\u8bc4\u8bba\u6570\u4e0d\u80fd\u8d85\u8fc71000\u5b57"), !1) : "" == c ? "none": c
        },
        getTags: function(b) {
            var c = a.guang.util.trim(a(b + " input[name=tags]").val()),
            c = c.replace(/&/g, "\uff06").replace(/\//g, "\uff0f").replace(/#/g, "\uff03").replace(/\\uff0c|\s+/g, ",");
            if ( - 1 != c.indexOf("\u7cbe\u54c1")) return a(b + " .goods-act").find(".errc").show().html("\u6807\u7b7e\u4e2d\u4e0d\u80fd\u5305\u542b\u201c\u7cbe\u54c1\u201d"),
            "101";
            return 200 < a.guang.util.getStrLength(c) ? (a(b + " .goods-act").find(".errc").show().html("\u6807\u7b7e\u4e0d\u80fd\u8d85\u8fc7200\u5b57"), "101") : c
        },
        pubSuccess: function() {
            if (a("#J_PubSuccessD")[0]) a("#J_PubSuccessD").data("overlay").load();
            else {
                var b;
                b = '<div id="J_PubSuccessD" class="g-dialog"><div class="dialog-content"><div class="bd clearfix"><p class="success-text"><span class="correct">\u5b9d\u8d1d\u53d1\u5e03\u6210\u529f\uff01</span></p>' + ('<p class="dispose">\u7cfb\u7edf\u6b63\u5728\u5904\u7406\uff0c\u7a0d\u540e\u5373\u53ef\u5728\u60a8<a href="' + "" + "/u/" + "" + '/share">\u53d1\u5e03\u7684\u5b9d\u8d1d</a>\u9875\u9762\u770b\u5230\u5b83</p>');
                a("body").append(b + '<div class="tac"><button class="bbl-btn closeD">\u786e\u5b9a</button></div></div></div></div>');
                a("#J_PubSuccessD").overlay({
                    top: "center",
                    mask: {
                        color: "#000",
                        loadSpeed: 200,
                        opacity: 0.3
                    },
                    closeOnClick: !1,
                    load: !0
                });
                a("#J_PubSuccessD .closeD").click(function() {
                    a("#J_PubSuccessD").overlay().close()
                })
            }
        },
        setSnsSync: function() {
            var b = {
                sina: "ss-sina",
                tec_weibo: "ss-tencent",
                qzone: "ss-qzone"
            },
            c = a(".sns-sync ul");
            a.ajax({
                url: "" + "/account/getUserSns.html",
                type: "post",
                dataType: "json",
                success: function(d) {
                    if (100 == d.code) {
                        var e = "",
                        d = d.userSns,
                        f;
                        for (f in d) b[f] && (e += '<li class="share-switch ' + b[f] + "-btnclick-" + d[f] + ' btnclick" data-status="' + d[f] + '" data-snsid="' + f + '" data-webname="' + b[f] + '"></li>');
                        c.append(e);
                        a(".sns-sync ul .btnclick").unbind().bind("click",
                        function() {
                            var b = a(this),
                            c = b.attr("data-webname") + "-btnclick-on",
                            d = b.attr("data-webname") + "-btnclick-off";
                            "on" == b.data("status") ? b.removeClass(c).addClass(d).data("status", "off") : b.removeClass(d).addClass(c).data("status", "on")
                        })
                    }
                }
            })
        },
        snsShare: function(b, c, d) {
            d = JSON.stringify({
                content: d
            });
            a.ajax({
                url: "" + "/snsShare",
                type: "post",
                dataType: "json",
                data: {
                    type: "baobei",
                    id: b,
                    comment: d,
                    snsSiteIds: c
                },
                success: function() {}
            })
        },
        goodsExist: function(b, c, d) {
            a.guang.ugc.pubJson = {
                id: b.id
            };
            c = 0 < b.imgs.length ? b.imgs[0] : "http://static.guang.com/images/user/photo/avatar-80.png";
            if (a("#J_GoodsExistD")[0]) a("#J_GoodsExistD").data("overlay").load();
            else {
                var e;
                e = '<div id="J_GoodsExistD" class="g-dialog ugc-dialog"><div class="dialog-content"><div class="hd"><h3>\u901b\u901b\u4e0a\u5df2\u7ecf\u6709\u8fd9\u4e2a\u5b9d\u8d1d\u5566</h3></div><div class="bd clearfix">' + ('<form id="J_GoodsExistForm" action="' + "" + '/ugc/import" method="POST">');
                e = e + '<div class="clearfix"><div class="goods-avatar">' + ('<a href="' + "" + "/baobei/" + b.pid + '" target="_blank" title="' + b.name + '"><img src="' + c + '" alt="' + b.name + '" /></a>');
                e = e + '</div><div class="goods-info">' + ('<p class="goodsNm"><a href="' + "" + "/baobei/" + b.pid + '" target="_blank" title="' + b.name + '">' + b.name + "</a></p>");
                e = e + '<p class="pb5">\u8bc4\u8bba\u4e00\u4e0b\uff1a</p><p><textarea class="base-txa" name="proComment" placeholder="\u559c\u6b22\u5b83\u4ec0\u4e48\u5462\uff1f"></textarea></p><p class="pt10 pb5">\u5b9d\u8d1d\u6807\u7b7e\uff1a</p>' + ('<p><input type="text" rel="tagsInput" class="base-input" name="tags" value="' + b.tags.join(",") + '" /></p>');
                e = e + '<p class="pt5 gc">\u591a\u4e2a\u6807\u7b7e\u7528\u7a7a\u683c\u3001\u4e2d\u6587\u6216\u82f1\u6587\u9017\u53f7\u9694\u5f00</p></div></div><div class="goods-act"><div class="clearfix"><a class="bbl-btn" id="J_GoodsSave" href="javascript:;">\u786e\u5b9a</a><label class="fl mt15 ml15 gc6"><input type="checkbox" name="tomyfav" /> \u63a8\u8350\u7ed9\u901b\u7c89</label>' + ('<div class="sns-sync"><span class="gc">\u540c\u6b65\u5206\u4eab\uff1a</span><ul></ul><span><a href="' + "" + '/account/sns" target="_blank">\u8bbe\u7f6e</a></span></div></div>');
                a("body").append(e + '<div class="errc mt10"></div></div></form></div><a class="close" href="javascript:;"></a></div></div>');
                a("#J_GoodsExistD").overlay({
                    top: "center",
                    mask: {
                        color: "#000",
                        loadSpeed: 200,
                        opacity: 0.3
                    },
                    closeOnClick: !1,
                    load: !0
                });
                a.guang.ugc.setSnsSync();
                a("#J_GoodsSave").unbind().bind("click",
                function() {
                    $this = a(this);
                    if ($this.hasClass("disabled")) return ! 1;
                    var b = a.guang.ugc.getCmt("#J_GoodsExistD");
                    if ("none" == b) b = "";
                    else if (!b) return ! 1;
                    var c = a.guang.ugc.getTags("#J_GoodsExistD");
                    if ("101" == c) return ! 1;
                    a.guang.ugc.pubJson.comment = b;
                    a.guang.ugc.pubJson.tags = c;
                    var e = [];
                    a(".sns-sync li").each(function() {
                        var b = a(this);
                        "on" == b.data("status") && e.push(b.data("snsid"))
                    });
                    a("#J_GoodsExistD input[name=tomyfav]")[0].checked && e.push("guang");
                    var k = e.join(",");
                    a.guang.ugc.pubJson.async = d ? !1 : !0;
                    a.ajax({
                        url: a("#J_GoodsExistForm").attr("action"),
                        type: "post",
                        dataType: "json",
                        data: a.guang.ugc.pubJson,
                        beforeSend: function() {
                            $this.disableBtn("bbl-btn");
                            a(".goods-act").find(".errc").show().html('<p class="ajaxvali pl20">\u4fdd\u5b58\u4e2d...</p>')
                        },
                        success: function(c) {
                            100 == c.code ? (a("#J_GoodsExistD").overlay().close(), a("#J_GoodsExistD").empty().remove(), -1 != window.location.href.indexOf("/share") ? (a.guang.tip.conf.tipClass = "tipmodal tipmodal-ok", a.guang.tip.show($this, "\u5b9d\u8d1d\u53d1\u5e03\u6210\u529f\uff01"), window.location.href = window.location.href) : d ? setTimeout(function() {
                                d(c.productId, b)
                            },
                            2E3) : a.guang.ugc.pubSuccess(), a.guang.ugc.snsShare(c.productId, k, b)) : 101 == c.code ? (a("#J_GoodsExistD").find(".errc").show(), a("#J_GoodsExistD").find(".errc").html("\u51fa\u9519\u4e86\uff0c\u8bf7\u91cd\u8bd5\u2026"), $this.enableBtn("bbl-btn")) : 102 == c.code && (a(".text-tip").html('<span class="errc">\u8f93\u5165\u7684\u6807\u7b7e\u6216\u8bc4\u8bba\u8fc7\u957f</span>').show(), $this.enableBtn("bbl-btn"))
                        },
                        error: function(b) {
                            405 == b.status && (b = b.getResponseHeader("RSTYPE"), a.guang.antiSpam.verification(b,
                            function() {
                                $this.trigger("click")
                            }), $this.enableBtn("bbl-btn"))
                        }
                    });
                    return ! 1
                });
                a("#J_GoodsExistForm").submit(function() {
                    return ! 1
                });
                a("#J_GoodsExistD").overlay().getClosers().bind("click",
                function() {
                    a("#J_GoodsExistD").empty().remove()
                })
            }
            if (a.guang.ugc.recomFlag) a("#J_GoodsExistD input[name=tomyfav]")[0].checked = "checked"
        },
        goodspub: function(b, c, d, e) {
            a.guang.ugc.pubJson = {
                id: b.id
            };
            d = !0;
            c && (d = c);
            if (a("#J_GoodsPubD")[0]) a("#J_GoodsPubD").data("overlay").load();
            else {
                c = '<div id="J_GoodsPubD" class="g-dialog ugc-dialog"><div class="dialog-content"><div class="hd"><h3>\u55ef~ \u5c31\u662f\u5b83\u5427</h3></div><div class="bd clearfix">' + ('<form id="J_GoodsPubForm" action="' + "" + '/ugc/import" method="POST">');
                c = c + '<div class="form-row"><label>\u5b9d\u8d1d\u540d\u79f0\uff1a</label>' + ('<input type="text" class="base-input" name="title" value="' + b.name + '" />');
                c = c + '</div><div class="form-row"><label>\u8bc4\u8bba\u4e00\u4e0b\uff1a</label><textarea class="base-txa" name="proComment" placeholder="\u559c\u6b22\u5b83\u4ec0\u4e48\u5462\uff1f"></textarea></div><div class="form-row"><label>\u5b9d\u8d1d\u6807\u7b7e\uff1a</label>' + ('<div class="inlineblock"><input type="text" rel="tagsInput" class="base-input" name="tags" value="' + b.tags.join(",") + '" />');
                c = c + '<p class="pt5 gc">\u591a\u4e2a\u6807\u7b7e\u7528\u7a7a\u683c\u3001\u4e2d\u6587\u6216\u82f1\u6587\u9017\u53f7\u9694\u5f00</p></div></div><div class="form-row clearfix"><label>\u5b9d\u8d1d\u56fe\u7247\uff1a</label><div class="goods-gallery"><div class="gallery-bd"><div class="items"></div></div><div class="gallery-ft clearfix"><span class="status">\u5df2\u9009 <em>0</em> \u5f20</span><span class="errc"></span><div class="gallery-pagin"><a href="javascript:;" class="sgr-btn prev">\u4e0a\u9875</a><span class="num-box"><em class="curP">1</em>/<em class="totalP"></em></span><a href="javascript:;" class="sgr-btn next">\u4e0b\u9875</a></div><a href="javascript:;" id="J_AddPicBtn" class="ap-btn sgr-btn" style="">\u4e0a\u4f20\u672c\u5730\u56fe\u7247</a></div></div></div><div class="goods-act"><div class="clearfix"><a class="bbl-btn" id="J_GoodsPub" href="javascript:;">\u53d1\u5e03</a><label class="fl mt15 ml15 gc6"><input type="checkbox" name="tomyfav" /> \u63a8\u8350\u7ed9\u901b\u7c89</label>' + ('<div class="sns-sync"><span class="gc">\u540c\u6b65\u5206\u4eab\uff1a</span><ul></ul><span><a href="' + "" + '/account/sns" target="_blank">\u8bbe\u7f6e</a></span></div></div>');
                a("body").append(c + '<div class="errc mt10"></div></div></form></div><a class="close" href="javascript:;"></a></div></div>'); ! 0 == d ? (a("#J_AddPicBtn").show(), a("#J_AddPicBtn").live("click",
                function() {
                    a(this).addLocalPic()
                }), a("#J_GoodsPubD .close").bind("click",
                function() {
                    a("#J_AddPicD").fadeOut("fast")
                })) : a("#J_AddPicBtn").hide();
                a("#J_GoodsPubD").overlay({
                    top: "center",
                    fixed: !1,
                    mask: {
                        color: "#000",
                        loadSpeed: 200,
                        opacity: 0.3
                    },
                    closeOnClick: !1,
                    load: !0
                });
                a.guang.ugc.setSnsSync();
                c = b.imgs;
                d = "";
                if (0 < c.length) {
                    d += "<ul>";
                    if ("item.buy.qq.com" == a.guang.util.getDomain(b.url)) d += '<li><a href="javascript:;"><img src="' + c[0] + '" alt="" /></a><i></i></li>';
                    else for (var b = 0,
                    f = c.length; b < f; b++) d += '<li><a href="javascript:;"><img src="' + c[b] + '" alt="" /></a><i></i></li>',
                    0 == (b + 1) % 8 && b != c.length - 1 && (d += "</ul><ul>");
                    a("#J_GoodsPubD .items").append(d + "</ul>");
                    a("#J_GoodsPubD .gallery-bd").scrollable({
                        vertical: !0
                    });
                    a("#J_GoodsPubD .prev").click(function() {
                        var b = parseInt(a(".curP").text());
                        parseInt(a(".totalP").text());
                        1 < b && a(".curP").text(b - 1)
                    });
                    a("#J_GoodsPubD .next").click(function() {
                        var b = parseInt(a(".curP").text()),
                        c = parseInt(a(".totalP").text());
                        b < c && a(".curP").text(b + 1)
                    });
                    a("#J_GoodsPubD .totalP").text(a("#J_GoodsPubD .gallery-bd ul").length)
                }
                a("#J_GoodsPubD li a, #J_GoodsPubD li i").die().live("click",
                function(b) {
                    b.preventDefault();
                    a("#J_GoodsPubD .gallery-ft").find(".status").show();
                    a("#J_GoodsPubD .gallery-ft").find(".errc").hide();
                    a(this).parent("li").hasClass("selected") ? a(this).parent("li").removeClass("selected") : a(this).parent("li").addClass("selected");
                    a("#J_GoodsPubD .status em").text(a("#J_GoodsPubD li.selected").length)
                });
                a("#J_GoodsPub").unbind().bind("click",
                function() {
                    $this = a(this);
                    if ($this.hasClass("disabled")) return ! 1;
                    var b = a.trim(a("#J_GoodsPubD input[name=title]").val()),
                    c = [];
                    a("#J_GoodsPubD li.selected").each(function() {
                        c.push(a(this).find("img").attr("src"))
                    });
                    var d = a.guang.ugc.getCmt("#J_GoodsPubD");
                    if ("none" == d) d = "";
                    else if (!d) return ! 1;
                    var f = a.guang.ugc.getTags("#J_GoodsPubD");
                    if (101 == f) return ! 1;
                    if ("" != b) a.guang.ugc.pubJson.title = b;
                    a.guang.ugc.pubJson.comment = d;
                    a.guang.ugc.pubJson.tags = f;
                    a.guang.ugc.pubJson.imgs = c.join(",");
                    if (0 == c.length) return a("#J_GoodsPubD .gallery-ft").find(".status").hide(),
                    a("#J_GoodsPubD .gallery-ft").find(".errc").show(),
                    a("#J_GoodsPubD .gallery-ft").find(".errc").html("\u81f3\u5c11\u8981\u9009\u4e00\u5f20\u54e6"),
                    !1;
                    var m = [];
                    a(".sns-sync li").each(function() {
                        var b = a(this);
                        "on" == b.data("status") && m.push(b.data("snsid"))
                    });
                    a("#J_GoodsPubD input[name=tomyfav]")[0].checked && m.push("guang");
                    var r = m.join(",");
                    a.guang.ugc.pubJson.async = e ? !1 : !0;
                    a.ajax({
                        url: a("#J_GoodsPubForm").attr("action"),
                        type: "post",
                        dataType: "json",
                        data: a.guang.ugc.pubJson,
                        beforeSend: function() {
                            $this.disableBtn("bbl-btn");
                            a(".goods-act").find(".errc").show().html('<p class="ajaxvali pl20">\u53d1\u5e03\u4e2d...</p>')
                        },
                        success: function(b) {
                            a("#J_AddPicD").fadeOut("fast");
                            if (100 == b.code) a("#J_GoodsPubD").overlay().close(),
                            a("#J_GoodsPubD").empty().remove(),
                            -1 != window.location.href.indexOf("/share") ? (a.guang.tip.conf.tipClass = "tipmodal tipmodal-ok", a.guang.tip.show($this, "\u5b9d\u8d1d\u53d1\u5e03\u6210\u529f\uff01"), window.location.href = window.location.href) : e ? setTimeout(function() {
                                e(b.productId, d)
                            },
                            2E3) : a.guang.ugc.pubSuccess(),
                            a.guang.ugc.snsShare(b.productId, r, d);
                            else if (101 == b.code) {
                                a("#J_GoodsPubD .goods-act").find(".errc").show();
                                var c = b.msg ? b.msg: "\u51fa\u9519\u4e86\uff0c\u8bf7\u91cd\u8bd5\u2026";
                                a("#J_GoodsPubD .goods-act").find(".errc").html(c);
                                $this.enableBtn("bbl-btn")
                            } else 102 == b.code ? (a("#J_GoodsPubD .goods-act").find(".errc").html("\u8f93\u5165\u7684\u6807\u7b7e\u6216\u8bc4\u8bba\u8fc7\u957f").show(), $this.enableBtn("bbl-btn")) : 112 == b.code && (a("#J_GoodsPubD .goods-act").find(".errc").html("\u8bf7\u8ba4\u771f\u586b\u5199\u5546\u54c1\u8bc4\u8bba").show(), $this.enableBtn("bbl-btn"))
                        },
                        error: function(b) {
                            405 == b.status && (b = b.getResponseHeader("RSTYPE"), a.guang.antiSpam.verification(b,
                            function() {
                                $this.trigger("click")
                            }), $this.enableBtn("bbl-btn"))
                        }
                    });
                    return ! 1
                });
                a("#J_GoodsPubForm").submit(function() {
                    return ! 1
                });
                a("#J_GoodsPubD").overlay().getClosers().bind("click",
                function() {
                    a("#J_GoodsPubD").empty().remove()
                })
            }
            if (a.guang.ugc.recomFlag) a("#J_GoodsPubD input[name=tomyfav]")[0].checked = "checked"
        }
    };
    a("a[rel=shareGoods]")[0] && a("a[rel=shareGoods]").click(function() {
        if (!a.guang.dialog.isLogin()) return ! 1;
        if ("true" == GUANGER.isBlack) return alert("\u60a8\u7684\u5206\u4eab\u529f\u80fd\u5df2\u88ab\u7981\u7528"),
        !1;
        var b = a(this);
        a.guang.ugc.recomFlag = b.hasClass("recom-bb") ? !0 : !1;
        if (a("#J_ShareGoodsD")[0]) a(".sg-input").val(""),
        a(".text-tip").html("");
        else {
            var c;
            c = '<div id="J_ShareGoodsD" class="g-dialog sg-dialog"><div class="content"><p class="title">\u5c06\u5b9d\u8d1d\u7f51\u5740\u7c98\u8d34\u5230\u4e0b\u9762\u6846\u4e2d\uff1a</p>' + ('<form class="sg-form" name="shareGoods" action="' + "" + '/ugc/api/findProduct">');
            c = c + '<input type="hidden" name="sns" value="1" /><div class="clearfix"><input class="base-input sg-input" name="url" value="" placeholder="http://" autocomplete="off" /><input type="submit" id="J_GoodsUrlSubmit" class="bbl-btn url-sub" value="\u786e\u5b9a" /></div><div class="text-tip"></div></form><div class="sg-source"><p class="pt5 pb5">\u5df2\u652f\u6301\u7f51\u7ad9\uff1a</p><div class="source-list clearfix"><a class="icon-source icon-taobao" href="http://www.taobao.com/" target="_blank">\u6dd8\u5b9d\u7f51</a><a class="icon-source icon-tmall" href="http://www.tmall.com/" target="_blank">\u5929\u732b\u5546\u57ce</a></div>' + ('<p class="contact"><strong>\u4e0d\u6b22\u8fce\u5546\u5bb6\u5206\u4eab\uff0c\u5408\u4f5c\u8bf7<a href="' + "" + '/evt/marketing.html" target="_blank">\u70b9\u51fb\u6b64\u5904</a>\u3002</strong></p>');
            a("body").append(c + '</div><div class="tipbox-up"><em>\u25c6</em><span>\u25c6</span></div><a class="close" href="javascript:;"></a></div></div>');
            a(".sg-dialog .close").click(function() {
                a("#J_ShareGoodsD").fadeOut("fast")
            });
            a(".sg-form").submit(function() {
                var b = a(this),
                c = a.guang.util.trim(a(".sg-input").val());
                "" == c ? a(".text-tip").html('<span class="errc">\u5b9d\u8d1d\u7f51\u5740\u4e0d\u80fd\u4e3a\u7a7a~</span>').show() : a.guang.util.validSite(c) ? (a(".text-tip").html('<span class="gc6">\u5b9d\u8d1d\u4fe1\u606f\u6293\u53d6\u4e2d\u2026</span>').show(), a("#J_GoodsUrlSubmit").disableBtn("bbl-btn"), a.post("" + "/ugc/fetch", b.serializeArray(),
                function(b) {
                    100 == b.code ? b.product.pid ? (a("#J_ShareGoodsD").hide(), a.guang.ugc.goodsExist(b.product, b.userSns)) : (a("#J_ShareGoodsD").hide(), a.guang.ugc.goodspub(b.product, !1, b.userSns)) : 103 == b.code ? (b = '<span class="errc">\u8fd9\u4e2a\u5b9d\u8d1d\u5df2\u7ecf\u5728\u901b\u4e0a\u4e86\u3002\u521a\u628a\u5b83\u6536\u5230\u4f60\u7684\u4e3b\u9875\u4e86\uff0c\u70b9\u51fb<a href="' + "" + "/u/" + "" + '/baobei">\u67e5\u770b</a></span>', a(".text-tip").html(b).show()) : a(".text-tip").html('<span class="errc">\u670d\u52a1\u5668\u51fa\u9519\u4e86\uff0c\u8bf7\u91cd\u8bd5!</span>').show();
                    a("#J_GoodsUrlSubmit").enableBtn("bbl-btn")
                }).error(function(b) {
                    405 == b.status ? (b = b.getResponseHeader("RSTYPE"), a.guang.antiSpam.verification(b), a("#J_GoodsUrlSubmit").enableBtn("bbl-btn")) : 404 == b.status && a.guang.urgent()
                })) : a(".text-tip").html('<span class="errc">\u6682\u65f6\u8fd8\u4e0d\u652f\u6301\u8fd9\u4e2a\u7f51\u7ad9\u5462~</span>').show();
                return ! 1
            })
        }
        b.hasClass("hd-share-goods") ? a(".shareIt").append(a("#J_ShareGoodsD")) : a("body").append(a("#J_ShareGoodsD"));
        c = a.guang.util.getPosition(b).leftBottom();
        var d = a("#J_ShareGoodsD").outerWidth();
        a("#J_ShareGoodsD").outerHeight();
        var e = b.outerWidth(),
        f = c.x,
        g = e / 2 - 8;
        960 < c.x + d && (f = c.x - (d - e), g = d - e / 2 - 8);
        a("#J_ShareGoodsD .tipbox-up").css({
            left: g + "px"
        });
        b.hasClass("hd-share-goods") ? a("#J_ShareGoodsD").css({
            left: "auto",
            right: "0",
            top: "33px"
        }).fadeIn("fast") : a("#J_ShareGoodsD").css({
            right: "auto",
            left: f + "px",
            top: c.y + 10 + "px"
        }).fadeIn("fast");
        a(".sg-input").focus()
    });
    a("input[rel=tagsInput]").live("keyup",
    function() {
        var b = a(this).val();
        if (64 >= a.guang.util.getStrLength(a.guang.util.htmlToTxt(b))) {
            a(this);
            for (b = b.replace(/\uff0c|\s+/g, ","); 0 <= b.indexOf(",,");) b = b.replace(",,", ",");
            for (var c = b.split(","), d = 0, e = !1; d < c.length; d++) {
                var f = c[d];
                14 < a.guang.util.htmlToTxt(f).length && (e = !0, c[d] = a.guang.util.substring4ChAndEn(f, 14))
            }
            e && (b = c.join(","));
            if (b != this.value) this.value = b
        } else this.value = a.guang.util.substring4ChAndEn(b, 64)
    })
})(jQuery);
$(function() {
    var a = null,
    b = function(a) {
        a ? $("a[rel=signIn]").addClass("checked").text("\u5df2\u7b7e") : $("a[rel=signIn]").removeClass("checked").text("\u7b7e\u5230")
    },
    c = function(b, c, f) {
        $("#checkin_intro").unbind().remove();
        b.after('<div id="checkin_intro">\u8fde\u7b7e\uff1a<b class="checkin_days">' + (1 == (c.userCheckinDays + "").length ? "0" + c.userCheckinDays: c.userCheckinDays) + '</b>&nbsp;\u5929<br/>\u79ef\u5206\uff1a<b id="jifen">' + c.userScore + '</b>&nbsp;\u5206<br/><p>\u7b7e\u5230\uff1a10\u79ef\u5206/\u5929<br/>\u8fde\u7b7e7\u5929\uff1a\u9001100<br/>\u8fde\u7b7e15\u5929\uff1a\u9001300<br/>\u8fde\u7b7e22\u5929\uff1a\u90011000<br/><a href="' + "" + '/account/invitation" target="_blank">\u9080\u8bf7\u53ef\u83b7\u66f4\u591a\u79ef\u5206</a></p></div>');
        $("#checkin_intro").hover(function() {
            null != a && clearTimeout(a)
        },
        function() {
            a = setTimeout(function() {
                $("#checkin_intro").remove()
            },
            500)
        });
        var g = function(a, b, c) {
            a >= b && $("#jifen")[0] ? $("#jifen").html(b) : ($("#jifen").html(a + c), setTimeout(function() {
                g(a + c, b, c)
            },
            50))
        };
        "show" == f && g(c.userScore / 2, c.userScore, 1 > c.userScore / 20 ? 1 : Math.floor(c.userScore / 20))
    }; (function() {
        if (1 >= "".length) return "Not login";
        $.ajax({
            url: "" + "/user_score",
            type: "post",
            dataType: "json",
            success: function(a) {
                100 == a.code ? b(a.status) : 101 != a.code && 300 == a.code && b(!1)
            }
        })
    })();
    $("a[rel=signIn]").click(function() {
        if (!$.guang.dialog.isLogin() || $("a[rel=signIn]").hasClass("checked")) return ! 1;
        var a = $(this);
        $.ajax({
            url: "" + "/user_checkin",
            type: "post",
            dataType: "json",
            success: function(e) {
                100 == e.code ? (c(a, e, "show"), b(!0)) : 101 == e.code ? ($.guang.tip.conf.tipClass = "tipmodal tipmodal-error3", $.guang.tip.show(a, ">_< \u7b7e\u5230\u5931\u8d25\uff01")) : 103 == e.code ? (c(a, e), b(!0)) : 300 == e.code && $.guang.dialog.login()
            }
        })
    });
    $("a[rel=signIn]").hover(function() {
        if (1 >= "".length) return "Not login";
        $this = $(this);
        $.ajax({
            url: "" + "/user_score",
            type: "post",
            dataType: "json",
            success: function(a) {
                100 == a.code ? c($this, a) : 101 == a.code ? (a.userScore = 0, a.userCheckinDays = 0, c($this, a)) : 300 == a.code && $.guang.dialog.login()
            }
        })
    },
    function() {
        $("#checkin_intro")[0] && (a = setTimeout(function() {
            $("#checkin_intro").remove()
        },
        500))
    });
    $("a[rel=J_InviteFellowJudge]").click(function() {});
    $(".hd-create-topic").click(function() {
        if (!$.guang.dialog.isLogin()) return ! 1
    })
}); (function(a) {
    a.fn.shareBtn = function() {
        if (!a(".share-dropdown")[0]) {
            var b;
            a("body").append('<ul class="share-link share-dropdown"><li><a class="s-sina" href="javascript:;">\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a</a></li><li><a class="s-qzone" href="javascript:;">\u5206\u4eab\u5230QQ\u7a7a\u95f4</a></li><li><a class="s-tencent" href="javascript:;">\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a</a></li><li><a class="s-douban" href="javascript:;">\u5206\u4eab\u5230\u8c46\u74e3</a></li><li><a class="s-renren" href="javascript:;">\u5206\u4eab\u5230\u4eba\u4eba\u7f51</a></li><li><a class="s-163" href="javascript:;">\u5206\u4eab\u5230\u7f51\u6613\u5fae\u535a</a></li></ul>')
        }
        return this.each(function() {
            var b = a(this);
            b.bind("mouseover",
            function() {
                a(".share-dropdown a").unbind("click").click(function() {
                    var d = a(this).attr("class"),
                    e = encodeURIComponent(b.data("sharetxt")),
                    f = b.data("sharelink"),
                    g = encodeURIComponent(b.data("sharepic")); - 1 == f.indexOf("http://guang.com") && (f = encodeURIComponent("http://guang.com" + f));
                    switch (d) {
                    case "s-sina":
                        window.open("http://service.t.sina.com.cn/share/share.php?appkey=1207757825&title=" + e + "&pic=" + g + "&url=" + f);
                        break;
                    case "s-tencent":
                        window.open("http://v.t.qq.com/share/share.php?appkey=801128565&url=" + f + "&title=" + e + "&pic=" + g + "&site=" + f);
                        break;
                    case "s-douban":
                        window.open("http://www.douban.com/recommend/?url=" + f + "&title=" + e);
                        break;
                    case "s-qzone":
                        window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=" + f);
                        break;
                    case "s-renren":
                        window.open("http://share.renren.com/share/buttonshare.do?link=" + f + "&title=" + e);
                        break;
                    case "s-163":
                        window.open("http://t.163.com/article/user/checkLogin.do?link=" + f + "&source=&info=" + e + "&images=" + g)
                    }
                })
            });
            b.dropDown({
                classNm: ".share-dropdown",
                offsetX: 122,
                offsetY: 0,
                isLocation: !0
            })
        })
    }
})(jQuery); (function(a) {
    a.guang.antiSpam = {
        verification: function(b, c) {
            if (!a("#J_VerifyDialog")[0]) {
                var d;
                d = '<div id="J_VerifyDialog" class="g-dialog"><div class="dialog-content"><div class="hd"><h3>\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff1a</h3></div><div class="bd clearfix"><div class="clearfix v-code"><img src="http://guang.com/captcha" id="J_Vcode" /><p><a id="J_AnotherVcode" href="javascript:;">\u770b\u4e0d\u6e05\u695a\uff0c\u6362\u4e00\u4e2a</a></p></div>' + ('<form class="code-fm" action="' + "" + '/captcha/validate" type="post">');
                a("body").append(d + '<input type="hidden" name="type" value="" /><input type="text" name="captcha" class="base-input code-input" value="" /><input type="submit" class="bbl-btn confirmV" value="\u786e\u5b9a" /></form> </div></div></div>');
                a("#J_VerifyDialog #J_AnotherVcode").click(function() {
                    a("#J_VerifyDialog #J_Vcode").attr("src", "http://guang.com/captcha?" + parseInt(1E6 * Math.random()))
                });
                a("#J_VerifyDialog .code-fm").submit(function() {
                    var b = a(this);
                    a.post(b.attr("action"), b.serializeArray(),
                    function(b) {
                        111 == b.code && alert("\u4eca\u5929\u53d1\u7684\u5b9d\u8d1d\u592a\u591a\u4e86\uff0c\u4f11\u606f\u4e0b\u5427~");
                        c && c();
                        a("#J_VerifyDialog").fadeOut()
                    }).error(function() {
                        a("#J_VerifyDialog #J_Vcode").attr("src", "http://guang.com/captcha?" + parseInt(1E6 * Math.random()));
                        a("#J_VerifyDialog input[name=captcha]").val("").focus()
                    });
                    return ! 1
                })
            }
            a("#J_VerifyDialog input[name=type]").val(b);
            a("#J_VerifyDialog #J_Vcode").attr("src", "http://guang.com/captcha?" + parseInt(1E6 * Math.random()));
            d = a("#J_VerifyDialog").outerWidth();
            var e = a("#J_VerifyDialog").outerHeight();
            a("#J_VerifyDialog").css({
                left: a(window).width() / 2 - d / 2 + "px",
                top: a(window).height() / 2 - e / 2 + "px"
            }).fadeIn()
        }
    }
})(jQuery); (function(a) {
    a.guang.urgent = function() {
        if (a("#J_UrgentD")[0]) a("#J_UrgentD").data("overlay").load();
        else {
            var b;
            b = '<div id="J_UrgentD" class="g-dialog urgent-dialog" style="width:350px;"><div class="dialog-content"><div class="hd"><h3>\u7d27\u6025\u901a\u77e5</h3></div><div class="bd" style="font-size:14px;">' + ('\u901b\u901b\u6b63\u5728\u5347\u7ea7\u7cfb\u7edf\uff0c\u4eca\u665a\u5b9d\u8d1d\u5206\u4eab\u7684\u529f\u80fd\u6682\u65f6\u5173\u95ed\uff0c\u660e\u65e9\u5f00\u653e\u3002<a href="' + "" + '/forum/post/483298" target="_blank">\u8be6\u60c5\u516c\u544a&gt;</a>');
            a("body").append(b + '</div><a class="close" href="javascript:;"></a></div></div>');
            a("#J_UrgentD").overlay({
                top: "center",
                mask: {
                    color: "#000",
                    loadSpeed: 200,
                    opacity: 0.3
                },
                closeOnClick: !1,
                load: !0
            })
        }
    }
})(jQuery);
$(function() {
    if (0 < "".length && $("a[rel=xiaoxi]")[0]) {
        var a = function(a) {
            var c = !1,
            d = "/u/",
            e;
            e = "<div class='xiaoxi-tip'><a href='javascript:;' class='closetip'>x</a>";
            a.likeNum && (c = !0, e += "<div class='xiaoxi-item' data-type='like'><a href='" + "" + "/mc/baobei_like'>" + a.likeNum + " \u4e2a\u65b0\u559c\u6b22</a></div>", $("#J_MessageTotalNum").show(), $("#J_LikeMessageNum").text(a.likeNum).show());
            a.pmMessageNum && (c = !0, e += "<div class='xiaoxi-item' data-type='personalMessage'><a href='" + "" + "/personal_msg/messageAll'>" + a.pmMessageNum + " \u5c01\u65b0\u79c1\u4fe1</a></div>", $("#J_MessageTotalNum").show(), $("#J_PMMessageNum").text(a.pmMessageNum).show());
            a.fansMessageNum && (c = !0, "enable" === GUANGER.isMerchantSite && (d = "/site/"), e += "<div class='xiaoxi-item' data-type='fans'><a href='" + "" + d + "" + "/fans'>" + a.fansMessageNum + " \u4f4d\u65b0\u7c89\u4e1d</a></div>", $("#J_MessageTotalNum").show(), $("#J_FanMessageNum").text(a.fansMessageNum).show());
            a.commentMessageNum && (c = !0, e += "<div class='xiaoxi-item' data-type='comments'><a href='" + "" + "/xiaoxi/comment'>" + a.commentMessageNum + " \u6761\u65b0\u8bc4\u8bba\u56de\u590d</a></div>", $("#J_MessageTotalNum").show(), $("#J_CRMessageNum").text(a.commentMessageNum).show());
            a.systemMessageNum && (c = !0, e += "<div class='xiaoxi-item' data-type='sys'><a href='" + "" + "/message/system'>" + a.systemMessageNum + " \u4e2a\u65b0\u901a\u77e5</a></div>", $("#J_MessageTotalNum").show(), $("#J_SystemMessageNum").text(a.systemMessageNum).show());
            c && $("#header #J_MessageTipBox").html(e + "</div>");
            0 < a.feedsMessageNum && ($("#feeds-xiaoxi .xiaoxi-sum").remove(), a = "<div class='xiaoxi-sum'>" + (99 < a.feedsMessageNum ? "N": a.feedsMessageNum) + "</div>", $("#header #feeds-xiaoxi").append(a));
            $("#header .xiaoxi-tip .closetip,#J_CancelMessageAll").click(function() {
                $.ajax({
                    url: "" + "/cancel_notify",
                    type: "post",
                    dataType: "json",
                    data: {},
                    success: function() {
                        $("#header .xiaoxi-tip").fadeOut(500);
                        $("#header .messge-count").hide()
                    }
                })
            })
        };
        $.ajax({
            url: "" + "/message_count",
            type: "post",
            dataType: "json",
            success: function(b) {
                100 == b.code && (0 < b.likeNum || 0 < b.pmMessageNum || 0 < b.fansMessageNum || 0 < b.commentMessageNum || 0 < b.replyMessageNum || 0 < b.atMessageNum || 0 < b.appraisalMessageNum || 0 < b.systemMessageNum || 0 < b.feedsMessageNum) && a(b)
            }
        });
        window.setInterval(function() {
            $.ajax({
                url: "" + "/message_count",
                type: "post",
                dataType: "json",
                success: function(b) {
                    100 == b.code && (0 < b.likeNum || 0 < b.pmMessageNum || 0 < b.fansMessageNum || 0 < b.commentMessageNum || 0 < b.replyMessageNum || 0 < b.atMessageNum || 0 < b.appraisalMessageNum || 0 < b.systemMessageNum || 0 < b.feedsMessageNum) && a(b)
                }
            })
        },
        3E4)
    }
});
$(function() {
    $(window).bind("scroll",
    function() {
        var a = $(document).scrollTop();
        $.guang.util.isIOS() || (83 < a ? ($(".m-nav").addClass("fixed"), $(".header-nav-search").show(), $(".m-nav .topic-tips").css("top", -200)) : ($(".m-nav").removeClass("fixed"), $(".header-nav-search").hide(), $(".m-nav .topic-tips").css("top", -28)))
    });
    $(".login-dropdown a").unbind("click").click(function() {
        if ($(this).hasClass("s-douban")) $.guang.dialog.doubanTip();
        else {
            var a = $(this).attr("href");
            $.guang.util.openWin(a)
        }
        return ! 1
    });
    $(".regLogin").dropDown({
        classNm: ".login-dropdown"
    });
    $(".unlogin-login").dropDown({
        classNm: ".unlogin-dropdown"
    });
    $(".gohome").dropDown({
        classNm: ".set-dropdown"
    });
    $(".xiaoxi").dropDown({
        classNm: ".xiaoxi-dropdown"
    });
    $(".share").dropDown({
        classNm: ".shareit-dropdown"
    });
    $(".weibo-login").dropDown({
        classNm: ".weibo-dropdown"
    });
    $(".btn-sg").bind("mouseover",
    function() {
        $("#checkin_intro")[0] && $("#checkin_intro").remove()
    });
    $("#returnTop").returntop()
});